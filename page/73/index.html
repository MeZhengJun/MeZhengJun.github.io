<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="LiWuK0jxrq55oR5-aNOK6r0wFuUC8EvSlpNYhiiBkDk">
  <meta name="baidu-site-verification" content="code-MRwc3a52M3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhengjun.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:type" content="website">
<meta property="og:title" content="郑君的学习笔记">
<meta property="og:url" content="http://zhengjun.top/page/73/index.html">
<meta property="og:site_name" content="郑君的学习笔记">
<meta property="og:description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郑  君">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://zhengjun.top/page/73/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/73/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>郑君的学习笔记</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="郑君的学习笔记" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">郑君的学习笔记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">要比昨天进步一点点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">214</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">80</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">1272</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郑  君"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">郑  君</p>
  <div class="site-description" itemprop="description">C++，golang，Java，Python，Kotlin，区块链，全栈</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1272</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">80</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">214</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ZhengHanYunBlog" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZhengHanYunBlog" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhenghanyun2021@126.com" title="E-Mail → mailto:zhenghanyun2021@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCmh8TlSil0IrCA-AQ9Xx9_Q" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCmh8TlSil0IrCA-AQ9Xx9_Q" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/24/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%94%9F%E6%B4%BB%E5%B0%8F%E7%9F%A5%E8%AF%86/%E8%8F%9C%E8%B0%B1/%E9%A5%AE%E9%A3%9F-%E7%B2%A5%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/24/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%94%9F%E6%B4%BB%E5%B0%8F%E7%9F%A5%E8%AF%86/%E8%8F%9C%E8%B0%B1/%E9%A5%AE%E9%A3%9F-%E7%B2%A5%E7%B1%BB/" class="post-title-link" itemprop="url">饮食-粥类</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-24 14:33:43" itemprop="dateCreated datePublished" datetime="2018-09-24T14:33:43+08:00">2018-09-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-12-03 13:20:11" itemprop="dateModified" datetime="2021-12-03T13:20:11+08:00">2021-12-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%8F%9C%E8%B0%B1/" itemprop="url" rel="index"><span itemprop="name">菜谱</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>175</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="祛湿"><a href="#祛湿" class="headerlink" title="祛湿"></a>祛湿</h2><p>红豆薏米粥：非常适合夏季及体内湿气较重的人食用，是祛湿健脾的佳品，调节便秘、减肥、美白功效<br>但是注意一下，因为薏米是凉性食物，女性在经期内不要食用这款粥，孕妇也禁食。</p>
<h2 id="补肾补血和健脾胃"><a href="#补肾补血和健脾胃" class="headerlink" title="补肾补血和健脾胃"></a>补肾补血和健脾胃</h2><p>山药小米枸杞粥：常吃山药小米粥能够补充人体需要的蛋白质和氨基酸，可以补肾补血和健脾胃。<br>把山药去皮切成小块，放入到洗净的小米中，放入冰糖。煮熟后，再加入十多粒枸杞即可。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/22/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/%E6%95%B0%E6%8D%AE%E5%BA%93/postgreSQL/postgreSQL-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/22/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/%E6%95%B0%E6%8D%AE%E5%BA%93/postgreSQL/postgreSQL-usage/" class="post-title-link" itemprop="url">postgreSQL usage</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-22 14:00:28" itemprop="dateCreated datePublished" datetime="2018-09-22T14:00:28+08:00">2018-09-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-14 15:00:38" itemprop="dateModified" datetime="2020-02-14T15:00:38+08:00">2020-02-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="whether-database-existence"><a href="#whether-database-existence" class="headerlink" title="whether database existence"></a>whether database existence</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT u.datname  FROM pg_catalog.pg_database u where u.datname=&#x27;rftDatabase&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="表是否存在"><a href="#表是否存在" class="headerlink" title="表是否存在"></a>表是否存在</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if( (select 1 from pg_class where relname=&#x27;test&#x27;::name and relkind=&#x27;r&#x27;) is null  ) then</span><br><span class="line">/*你的代码*/</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>
<h2 id="docker-with-postgreSQL"><a href="#docker-with-postgreSQL" class="headerlink" title="docker with postgreSQL"></a>docker with postgreSQL</h2><p><a target="_blank" rel="noopener" href="https://hub.docker.com/_/postgres/">office docker</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull postgres</span><br><span class="line"></span><br><span class="line">// start a postgres instance</span><br><span class="line">docker run --name pool-postgres -p 5432:5432 -e POSTGRES_PASSWORD=password -d postgres</span><br></pre></td></tr></table></figure>

<h2 id="Postgres-SQL-server-9-6-9-源码编译"><a href="#Postgres-SQL-server-9-6-9-源码编译" class="headerlink" title="Postgres SQL server 9.6.9 源码编译"></a>Postgres SQL server 9.6.9 源码编译</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install libreadline-dev</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">sudo adduser postgres</span><br><span class="line">sudo mkdir /usr/local/pgsql/data</span><br><span class="line">sudo chown postgres /usr/local/pgsql/data</span><br><span class="line">su - postgres</span><br><span class="line">/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data</span><br><span class="line">/usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data &gt;logfile 2&gt;&amp;1 &amp;</span><br><span class="line">/usr/local/pgsql/bin/createdb test</span><br><span class="line">/usr/local/pgsql/bin/psql test</span><br></pre></td></tr></table></figure>
<h2 id="设置开机自启动"><a href="#设置开机自启动" class="headerlink" title="设置开机自启动"></a>设置开机自启动</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PostgreSQL的开机自启动脚本位于PostgreSQL源码目录的contrib/start-scripts路径下</span><br><span class="line">chmod a+x linux</span><br><span class="line">cp linux /etc/init.d/postgresql</span><br><span class="line">修改/etc/init.d/postgresql文件的两个变量</span><br><span class="line">prefix设置为postgresql的安装路径：/xxx/pgsql</span><br><span class="line">PGDATA设置为postgresql的数据目录路径：/xxx/pgsql/data</span><br><span class="line"></span><br><span class="line">启动PostgreSQL服务</span><br><span class="line">service postgresql start</span><br><span class="line"></span><br><span class="line">设置postgresql服务开机自启动</span><br><span class="line">sudo apt install sysv-rc-conf</span><br><span class="line"></span><br><span class="line">sysv-rc-conf postgresql</span><br></pre></td></tr></table></figure>

<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">su - postgres</span><br><span class="line">/usr/local/pgsql/bin/pg_ctl -s -D /usr/local/pgsql/data start -w -t 120</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/09/22/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/%E6%95%B0%E6%8D%AE%E5%BA%93/postgreSQL/postgreSQL-usage/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/21/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/CPP/cpp-vector/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/21/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/CPP/cpp-vector/" class="post-title-link" itemprop="url">cpp-vector</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-21 19:38:45" itemprop="dateCreated datePublished" datetime="2018-09-21T19:38:45+08:00">2018-09-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-01-20 15:43:10" itemprop="dateModified" datetime="2022-01-20T15:43:10+08:00">2022-01-20</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>如果你需要高效的随即存取，而不在乎插入和删除的效率，使用vector</p>
<h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">pointer _Myfirst;   <span class="comment">// pointer to beginning of array</span></span><br><span class="line">pointer _Mylast;    <span class="comment">// pointer to current end of sequence</span></span><br><span class="line">pointer _Myend; <span class="comment">// pointer to end of array</span></span><br></pre></td></tr></table></figure>

<img alt="20190515_144147.png" src="/2018/09/21/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/CPP/cpp-vector/20190515_144147.png" width="400" height>

<p>大小：size=_Mylast - _Myfirst；<br>容量：capacity=_Myend - _Myfirst；<br>分别对应于resize()、reserve()两个函数。<br>size表示vector中已有元素的个数，容量表示vector最多可存储的元素的个数；为了降低二次分配时的成本，vector实际配置的大小可能比客户需求的更大一些，以备将来扩充，这就是容量的概念。即capacity&gt;=size，当等于时，容器此时已满，若再要加入新的元素时，就要重新进行内存分配，整个vector的数据都要移动到新内存。二次分配成本较高，在实际操作时，应尽量预留一定空间，避免二次分配。</p>
<h1 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过数组地址初始化</span></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">//通过数组a的地址初始化，注意地址是从0到5（左闭右开区间）</span></span><br><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">b</span><span class="params">(a, a+<span class="number">5</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过另一个 vector 初始化</span></span><br><span class="line">v2.<span class="built_in">assign</span>(v1.<span class="built_in">begin</span>(),v1.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//c++ 11</span></span><br><span class="line">vector&lt;string&gt; g_vResultKeyName = &#123; <span class="string">&quot;gisType&quot;</span>, <span class="string">&quot;source&quot;</span>,<span class="string">&quot;nationality&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>

<h2 id="二维数组初始化"><a href="#二维数组初始化" class="headerlink" title="二维数组初始化"></a>二维数组初始化</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">std::vector&lt;std::vector&lt;<span class="keyword">int32_t</span>&gt;&gt; vChess;</span><br><span class="line"></span><br><span class="line"><span class="built_in">typeChess</span>()</span><br><span class="line">&#123;</span><br><span class="line">  vChess.<span class="built_in">assign</span>(vChess.<span class="built_in">size</span>(), std::vector&lt;<span class="keyword">int32_t</span>&gt;(vChess.<span class="built_in">size</span>(), <span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h1><h2 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">AB.<span class="built_in">reserve</span>( A.<span class="built_in">size</span>() + B.<span class="built_in">size</span>() ); <span class="comment">// preallocate memory</span></span><br><span class="line">AB.<span class="built_in">insert</span>( AB.<span class="built_in">end</span>(), A.<span class="built_in">begin</span>(), A.<span class="built_in">end</span>() );</span><br><span class="line">AB.<span class="built_in">insert</span>( AB.<span class="built_in">end</span>(), B.<span class="built_in">begin</span>(), B.<span class="built_in">end</span>() );</span><br></pre></td></tr></table></figure>

<h1 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector_name.<span class="built_in">insert</span> (position, val)</span><br><span class="line">vector_name.<span class="built_in">insert</span>(position, size, val)</span><br><span class="line">vector_name.<span class="built_in">insert</span>(position, iterator1 , iterator2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// program below illustrates the </span></span><br><span class="line"><span class="comment">// vector::insert() function </span></span><br><span class="line">  </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span> </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="comment">// initialising the vector </span></span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; vec = &#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span> &#125;; </span><br><span class="line">  </span><br><span class="line">    <span class="comment">// inserts 3 at front   </span></span><br><span class="line">    <span class="keyword">auto</span> it = vec.<span class="built_in">insert</span>(vec.<span class="built_in">begin</span>(), <span class="number">3</span>); </span><br><span class="line">      </span><br><span class="line">    <span class="comment">// inserts 2 at front  </span></span><br><span class="line">    vec.<span class="built_in">insert</span>(it, <span class="number">2</span>); </span><br><span class="line">  </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The vector elements are: &quot;</span>;  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = vec.<span class="built_in">begin</span>(); it != vec.<span class="built_in">end</span>(); ++it) </span><br><span class="line">        cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>; </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">The vector elements are: <span class="number">2</span> <span class="number">3</span> <span class="number">10</span> <span class="number">20</span> <span class="number">30</span> <span class="number">40</span></span><br></pre></td></tr></table></figure>

<h1 id="v-i-与v-at-i-的区别"><a href="#v-i-与v-at-i-的区别" class="headerlink" title="v[i]与v.at(i)的区别"></a>v[i]与v.at(i)的区别</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void f(vector&lt;int&gt; &amp;v)</span><br><span class="line">&#123;</span><br><span class="line">  v[0];    // A</span><br><span class="line">  v.at[0];  // B</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果 v 非空，A 行和 B 行没有任何区别。如果 v 为空，B行会抛出 std::out_of_range 异常，A 行的行为未定义。</p>
<p>c++ 标准不要求 vector<T>::operator[] 进行下标越界检查，原因是为了效率，总是强制下标越界检查会增加程序的性能开销。<br>设计vector是用来代替内置数组的，所以效率问题也应该考虑。不过使用 operator[] 就要自己承担越界风险了。</T></p>
<p>如果需要下标越界检查，请使用 at。</p>
<h2 id="emplace-back-vs-push-back"><a href="#emplace-back-vs-push-back" class="headerlink" title="emplace_back vs push_back"></a>emplace_back vs push_back</h2><p>emplace_back not copy and move object to container<br>A similar member function exists, push_back, which either copies or moves an existing object into the container</p>
<h1 id="string-to-vector"><a href="#string-to-vector" class="headerlink" title="string to vector"></a>string to vector</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">std::vector&lt;BYTE&gt; m_vCmdBuf</span><br><span class="line">string cmd = <span class="built_in">getDevParam</span>(m_counter++, param);</span><br><span class="line">m_vCmdBuf.<span class="built_in">assign</span>(cmd.<span class="built_in">begin</span>(), cmd.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure>

<h1 id="获取最后一个元素"><a href="#获取最后一个元素" class="headerlink" title="获取最后一个元素"></a>获取最后一个元素</h1><p>声明：vector<T>  vec;<br>方法一： return vec.at(vec.size()-1);<br>方法二： return vec.back();<br>方法三： return vec.end()-1;  注意：end指向末尾元素的下一个元素。<br>方法四： return vec.rbegin();</T></p>
<h1 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vector&lt;int&gt; temlist;</span><br><span class="line">temlist.assign(list.begin(), list.end());</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/20/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/primecoin/primecoin-upgrade-relative/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/20/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/primecoin/primecoin-upgrade-relative/" class="post-title-link" itemprop="url">primecoin-upgrade relative</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2018-09-20 15:42:48 / 修改时间：15:53:30" itemprop="dateCreated datePublished" datetime="2018-09-20T15:42:48+08:00">2018-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>19</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki">bip9</a><br><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0009/assignments.mediawiki">bip9 Deployments</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/15/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-script/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/15/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-script/" class="post-title-link" itemprop="url">bitcoin-script</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-15 14:41:46" itemprop="dateCreated datePublished" datetime="2018-09-15T14:41:46+08:00">2018-09-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-10-25 09:16:44" itemprop="dateModified" datetime="2018-10-25T09:16:44+08:00">2018-10-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>scriptPubKey (“output script”)<br>pay2pubkey tx: <pubkey> OP_CHECKSIG<br>Pay2PubKeyHash Tx: OP_DUP OP_HASH160 <pubKeyHash> OP_EQUALVERIFY OP_CHECKSIG<br>Pay2ScriptHash Tx: OP_HASH160 <scriptHash> OP_EQUAL</scriptHash></pubKeyHash></pubkey></p>
<p>When technical docs refer to the redeemScript, it is referring to the script in the ScriptSig (yet another poorly named element) of the input of a transactions.  There is only a redeemScript when redeeming a P2SH.</p>
<p>scriptSig (“input script”)<br>Pay2PubKeyHash: <sig> <pubKey><br>Pay2ScriptHash: <sig-0> … <sig-n> <redeemScript></redeemScript></sig-n></sig-0></pubKey></sig></p>
<p>P2SH <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki">BIP16</a></p>
<p>scriptSig:    [signature] {[pubkey] OP_CHECKSIG}<br>scriptPubKey: OP_HASH160 [20-byte-hash of {[pubkey] OP_CHECKSIG} ] OP_EQUAL</p>
<ol>
<li>[signature] and {[pubkey] OP_CHECKSIG} are pushed onto the stack</li>
<li>OP_HASH160 hashes {[pubkey] OP_CHECKSIG}</li>
<li>The same hash comes from the scriptPubKey onto the stack</li>
<li>Consequently OP_EQUAL gives True</li>
<li>The script is popped off the stack, leaving only [signature] on the stack.</li>
<li>The deserialized script is added, leaving [signature] [pubkey] OP_CHECKSIG</li>
<li>The transaction is validated again, that is, a normal signature verification occurs against the specified public key.</li>
</ol>
<h2 id="Provably-Unspendable-Prunable-Outputs"><a href="#Provably-Unspendable-Prunable-Outputs" class="headerlink" title="Provably Unspendable/Prunable Outputs"></a>Provably Unspendable/Prunable Outputs</h2><p>The standard way to mark a transaction as provably unspendable is with a scriptPubKey of the following form:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scriptPubKey: OP_RETURN &#123;zero or more ops&#125;</span><br></pre></td></tr></table></figure>

<p>OP_RETURN tx<br><a target="_blank" rel="noopener" href="https://bchain.info/BTC/tx/1a2e22a717d626fc5db363582007c46924ae6b28319f07cb1b907776bd8293fc">https://bchain.info/BTC/tx/1a2e22a717d626fc5db363582007c46924ae6b28319f07cb1b907776bd8293fc</a></p>
<p>txid 1a2e22a717d626fc5db363582007c46924ae6b28319f07cb1b907776bd8293fc<br>01000000015db413e8393e51026b492cb0547e5910afe81c72ea6008a357075a3ff1584075010000006a473044022055bcb36c829a614451787fe8c9bfb3798b683809b65b92037a015eccb5ff659702202461d2c708a4fd57c839e43634e8c02935d7b7d1db5b978432b0674c44645ed10121032c1ea520c25c4e66831cd395a3cd26f0e0a1472a3103fc8a4a63ef10e92d123cffffffff010000000000000000166a14215477656e74792062797465206469676573742e00000000</p>
<p>“!Twenty byte digest.”</p>
<h2 id="Freezing-funds-until-a-time-in-the-future"><a href="#Freezing-funds-until-a-time-in-the-future" class="headerlink" title="Freezing funds until a time in the future"></a>Freezing funds until a time in the future</h2><p>Using OP_CHECKLOCKTIMEVERIFY it is possible to make funds provably unspendable until a certain point in the future.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scriptPubKey: &lt;expiry time&gt; OP_CHECKLOCKTIMEVERIFY OP_DROP OP_DUP OP_HASH160 &lt;pubKeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG</span><br><span class="line">scriptSig: &lt;sig&gt; &lt;pubKey&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/14/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-segwit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/14/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-segwit/" class="post-title-link" itemprop="url">bitcoin-segwit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-14 21:58:17" itemprop="dateCreated datePublished" datetime="2018-09-14T21:58:17+08:00">2018-09-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-10-10 17:40:28" itemprop="dateModified" datetime="2018-10-10T17:40:28+08:00">2018-10-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>955</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki">BIP141</a></p>
<p>Segregated Witness, or SegWit Bitcoin Improvement Proposal number BIP141</p>
<p>The declared purpose was to prevent nonintentional bitcoin transaction malleability, allow optional data transmission, and to bypass certain protocol restrictions (such as the block size limit) with a soft fork.[2]</p>
<p>It was also intended to mitigate a blockchain size limitation problem that reduces bitcoin transaction speed.</p>
<p>It does this by splitting the transaction into two segments, removing the unlocking signature (“witness” data) from the original portion and appending it as a separate structure at the end.[3] The original section would continue to hold the sender and receiver data, and the new “witness” structure would contain scripts and signatures. The original data segment would be counted normally, but the “witness” segment would, in effect, be counted as a quarter of its real size.</p>
<h2 id="隔离见证做了什么改动？"><a href="#隔离见证做了什么改动？" class="headerlink" title="隔离见证做了什么改动？"></a>隔离见证做了什么改动？</h2><p>隔离见证就是把脚本签名(scriptSig)信息从基本结构 (base block) 里拿出来，放在一个新的数据结构当中。做验证工作的节点和矿工也会验证这个新的数据结构里的脚本签名，以确保交易是有效的。<br>当审核统计区块大小不能超过1M的时候。脚本签名大小不会被计算在内。</p>
<p>隔离见证重新整理了每个交易内容的布局方式。把脚本签名从交易内容的结构里面拿出来，放到了最下面，并有一个指针Pointer指向它。</p>
<img alt="a5ca0713.png" src="/2018/09/14/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-segwit/a5ca0713.png" width height>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-OP-RETURN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-OP-RETURN/" class="post-title-link" itemprop="url">bitcoin-OP-RETURN</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2018-09-13 21:52:57 / 修改时间：21:53:48" itemprop="dateCreated datePublished" datetime="2018-09-13T21:52:57+08:00">2018-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>626</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://bitzuma.com/posts/op-return-and-the-future-of-bitcoin/">ref</a></p>
<p>Conclusions<br>Bitcoin’s long-running debate over acceptable uses of the block chain has received some much needed clarity. Applications can now inexpensively add a 40 byte data payload to transactions using the OP_RETURN script function. On a technical level, OP_RETURN doesn’t enable anything that wasn’t previously possible. Instead, OP_RETURN provides a standard interface through which new services can potentially be layered onto the block chain, and a central point of focus for future work on integration tools.</p>
<p>This move brings the vision of Bitcoin as a universal platform for mediating complex agreements one step closer to reality. The extent to which the Bitcoin community will embrace this vision remains an open question.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-change-history-study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-change-history-study/" class="post-title-link" itemprop="url">bitcoin-change history study</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-13 16:59:00" itemprop="dateCreated datePublished" datetime="2018-09-13T16:59:00+08:00">2018-09-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-09-15 09:35:22" itemprop="dateModified" datetime="2018-09-15T09:35:22+08:00">2018-09-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="change-history"><a href="#change-history" class="headerlink" title="change history"></a>change history</h1><h2 id="2014-03-19-Bitcoin-Core-version-0-9-0-released"><a href="#2014-03-19-Bitcoin-Core-version-0-9-0-released" class="headerlink" title="2014-03-19 Bitcoin Core version 0.9.0 released"></a>2014-03-19 Bitcoin Core version 0.9.0 released</h2><ul>
<li>OP_RETURN feature<br>这个特性不是认可在区块中存储数据，而是创建一个可证明，可裁剪的 output，避免已经提交的一些存储模式，<br>例如：在 unspendable TX outputs 中保存图片等任意数据。避免 UTXO database 膨胀影响使用。</li>
</ul>
<p>在区块中存储非交易数据现在仍然是个坏主意，保存在其他地方更有效率并且成本也更低。</p>
<ul>
<li>Autotools build system</li>
<li>Bitcoin-cli</li>
<li>Transaction Fees</li>
</ul>
<h2 id="2014-04-08-Bitcoin-Core-version-0-9-1-released"><a href="#2014-04-08-Bitcoin-Core-version-0-9-1-released" class="headerlink" title="2014-04-08 Bitcoin Core version 0.9.1 released"></a>2014-04-08 Bitcoin Core version 0.9.1 released</h2><p>No code change, just dependencies</p>
<h2 id="2014-06-16-Bitcoin-Core-version-0-9-2-released"><a href="#2014-06-16-Bitcoin-Core-version-0-9-2-released" class="headerlink" title="2014-06-16 Bitcoin Core version 0.9.2 released"></a>2014-06-16 Bitcoin Core version 0.9.2 released</h2><ul>
<li>Gitian OSX build</li>
<li>GUI</li>
</ul>
<h2 id="2014-06-19-Bitcoin-Core-version-0-9-2-1-released"><a href="#2014-06-19-Bitcoin-Core-version-0-9-2-1-released" class="headerlink" title="2014-06-19 Bitcoin Core version 0.9.2.1 released"></a>2014-06-19 Bitcoin Core version 0.9.2.1 released</h2><p>not found potential fork feature</p>
<h2 id="2014-09-27-Bitcoin-Core-version-0-9-3-released"><a href="#2014-09-27-Bitcoin-Core-version-0-9-3-released" class="headerlink" title="2014-09-27 Bitcoin Core version 0.9.3 released"></a>2014-09-27 Bitcoin Core version 0.9.3 released</h2><p>not found potential fork feature</p>
<h2 id="2015-02-16-Bitcoin-Core-version-0-10-0-released"><a href="#2015-02-16-Bitcoin-Core-version-0-10-0-released" class="headerlink" title="2015-02-16 Bitcoin Core version 0.10.0 released"></a>2015-02-16 Bitcoin Core version 0.10.0 released</h2><p>BIP 66: strict DER encoding for signatures</p>
<h2 id="2015-04-27-Bitcoin-Core-version-0-10-1-released"><a href="#2015-04-27-Bitcoin-Core-version-0-10-1-released" class="headerlink" title="2015-04-27 Bitcoin Core version 0.10.1 released"></a>2015-04-27 Bitcoin Core version 0.10.1 released</h2><p>not found potential fork feature</p>
<h2 id="2015-05-19-Bitcoin-Core-version-0-10-2-released"><a href="#2015-05-19-Bitcoin-Core-version-0-10-2-released" class="headerlink" title="2015-05-19 Bitcoin Core version 0.10.2 released"></a>2015-05-19 Bitcoin Core version 0.10.2 released</h2><p>not found potential fork feature</p>
<h2 id="2015-07-12-Bitcoin-Core-version-0-11-0-released"><a href="#2015-07-12-Bitcoin-Core-version-0-11-0-released" class="headerlink" title="2015-07-12 Bitcoin Core version 0.11.0 released"></a>2015-07-12 Bitcoin Core version 0.11.0 released</h2><ul>
<li>Change the default maximum OP_RETURN size to 80 bytes</li>
<li>Implement BIP62 rule 6</li>
<li>Implement BIP66</li>
</ul>
<h2 id="2015-10-14-Bitcoin-Core-version-0-10-3-released"><a href="#2015-10-14-Bitcoin-Core-version-0-10-3-released" class="headerlink" title="2015-10-14 Bitcoin Core version 0.10.3 released"></a>2015-10-14 Bitcoin Core version 0.10.3 released</h2><h2 id="2015-10-15-Bitcoin-Core-version-0-11-1-released"><a href="#2015-10-15-Bitcoin-Core-version-0-11-1-released" class="headerlink" title="2015-10-15 Bitcoin Core version 0.11.1 released"></a>2015-10-15 Bitcoin Core version 0.11.1 released</h2><h2 id="2015-11-13-Bitcoin-Core-version-0-11-2-released"><a href="#2015-11-13-Bitcoin-Core-version-0-11-2-released" class="headerlink" title="2015-11-13 Bitcoin Core version 0.11.2 released"></a>2015-11-13 Bitcoin Core version 0.11.2 released</h2><p>BIP113 specifies a soft fork</p>
<h2 id="2016-02-23-Bitcoin-Core-version-0-12-0-released"><a href="#2016-02-23-Bitcoin-Core-version-0-12-0-released" class="headerlink" title="2016-02-23 Bitcoin Core version 0.12.0 released"></a>2016-02-23 Bitcoin Core version 0.12.0 released</h2><h2 id="2016-04-15-Bitcoin-Core-version-0-12-1-released"><a href="#2016-04-15-Bitcoin-Core-version-0-12-1-released" class="headerlink" title="2016-04-15 Bitcoin Core version 0.12.1 released"></a>2016-04-15 Bitcoin Core version 0.12.1 released</h2><p>This release includes a soft fork deployment to enforce BIP68, BIP112 and BIP113 using the BIP9 deployment mechanism.</p>
<h2 id="2016-08-23-Bitcoin-Core-version-0-13-0-released"><a href="#2016-08-23-Bitcoin-Core-version-0-13-0-released" class="headerlink" title="2016-08-23 Bitcoin Core version 0.13.0 released"></a>2016-08-23 Bitcoin Core version 0.13.0 released</h2><ul>
<li>From 0.13.0 on, Windows XP is no longer supported.</li>
<li>C++11 and Python 3</li>
<li>Newly created wallets will use hierarchical deterministic key generation according to BIP32 (keypath m/0’/0’/k’). Existing wallets will still use traditional key generation.</li>
<li>Segregated Witness not activate yet</li>
<li>Removal of internal miner</li>
</ul>
<h2 id="2016-10-27-Bitcoin-Core-version-0-13-1-released"><a href="#2016-10-27-Bitcoin-Core-version-0-13-1-released" class="headerlink" title="2016-10-27 Bitcoin Core version 0.13.1 released"></a>2016-10-27 Bitcoin Core version 0.13.1 released</h2><p> Implement NULLDUMMY softfork (BIP147) (jl2012)</p>
<h2 id="2017-01-03-Bitcoin-Core-version-0-13-2-released"><a href="#2017-01-03-Bitcoin-Core-version-0-13-2-released" class="headerlink" title="2017-01-03 Bitcoin Core version 0.13.2 released"></a>2017-01-03 Bitcoin Core version 0.13.2 released</h2><h2 id="2017-03-08-Bitcoin-Core-version-0-14-0-released"><a href="#2017-03-08-Bitcoin-Core-version-0-14-0-released" class="headerlink" title="2017-03-08 Bitcoin Core version 0.14.0 released"></a>2017-03-08 Bitcoin Core version 0.14.0 released</h2><h2 id="2017-04-22-Bitcoin-Core-version-0-14-1-released"><a href="#2017-04-22-Bitcoin-Core-version-0-14-1-released" class="headerlink" title="2017-04-22 Bitcoin Core version 0.14.1 released"></a>2017-04-22 Bitcoin Core version 0.14.1 released</h2><h2 id="2017-06-17-Bitcoin-Core-version-0-14-2-released"><a href="#2017-06-17-Bitcoin-Core-version-0-14-2-released" class="headerlink" title="2017-06-17 Bitcoin Core version 0.14.2 released"></a>2017-06-17 Bitcoin Core version 0.14.2 released</h2><h2 id="2017-09-14-Bitcoin-Core-version-0-15-0-released"><a href="#2017-09-14-Bitcoin-Core-version-0-15-0-released" class="headerlink" title="2017-09-14 Bitcoin Core version 0.15.0 released"></a>2017-09-14 Bitcoin Core version 0.15.0 released</h2><h2 id="2017-09-19-Bitcoin-Core-version-0-15-0-1-released"><a href="#2017-09-19-Bitcoin-Core-version-0-15-0-1-released" class="headerlink" title="2017-09-19 Bitcoin Core version 0.15.0.1 released"></a>2017-09-19 Bitcoin Core version 0.15.0.1 released</h2><p>fix gui bug</p>
<h2 id="2017-11-11-Bitcoin-Core-version-0-15-1-released"><a href="#2017-11-11-Bitcoin-Core-version-0-15-1-released" class="headerlink" title="2017-11-11 Bitcoin Core version 0.15.1 released"></a>2017-11-11 Bitcoin Core version 0.15.1 released</h2><h2 id="2018-02-26-Bitcoin-Core-version-0-16-0-released"><a href="#2018-02-26-Bitcoin-Core-version-0-16-0-released" class="headerlink" title="2018-02-26 Bitcoin Core version 0.16.0 released"></a>2018-02-26 Bitcoin Core version 0.16.0 released</h2><ul>
<li>Segwit Wallet</li>
<li>HD-wallets by default<br>Due to a backward-incompatible change in the wallet database, wallets created with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0 will only create hierarchical deterministic (HD) wallets. Note that this only applies to new wallets; wallets made with previous versions will not be upgraded to be HD.<h2 id="2018-06-15-Bitcoin-Core-version-0-16-1-released"><a href="#2018-06-15-Bitcoin-Core-version-0-16-1-released" class="headerlink" title="2018-06-15 Bitcoin Core version 0.16.1 released"></a>2018-06-15 Bitcoin Core version 0.16.1 released</h2><h2 id="2018-07-29-Bitcoin-Core-version-0-16-2-released"><a href="#2018-07-29-Bitcoin-Core-version-0-16-2-released" class="headerlink" title="2018-07-29 Bitcoin Core version 0.16.2 released"></a>2018-07-29 Bitcoin Core version 0.16.2 released</h2></li>
</ul>
<h1 id="List-of-Bitcoin-consensus-fork"><a href="#List-of-Bitcoin-consensus-fork" class="headerlink" title="List of Bitcoin consensus fork"></a>List of Bitcoin consensus fork</h1><p><a target="_blank" rel="noopener" href="https://blog.bitmex.com/bitcoins-consensus-forks/">ref.</a><br>after 0.8.6 version there is six soft fork has been done</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Activation Block Number</th>
<th>BIP Number or Software Version</th>
<th>Description</th>
<th>Type</th>
<th>Outcome</th>
</tr>
</thead>
<tbody><tr>
<td>4 July 2015</td>
<td>363,731</td>
<td>BIP66</td>
<td>Strict DER signature upgrade means Bitcoin is no longer dependent on OpenSSL’s signature parsing.</td>
<td>Softfork</td>
<td>95% threshold over a 1,000-block period. A chainsplit occurred, lasting six blocks, as some miners signaled support for BIP66 but had not upgraded and were SPY mining. The new softfork rules chain eventually took the lead.</td>
</tr>
<tr>
<td>14 Dec 2015</td>
<td>388,380</td>
<td>BIP65</td>
<td>Check Lock Time Verify enables funds to be locked until a specific time in the future. This is Bitcoin’s first new function.</td>
<td>Softfork</td>
<td>Successful rollout using a 95% threshold.</td>
</tr>
<tr>
<td>4 July 2016</td>
<td>419,328</td>
<td>BIP68，BIP112，BIP113</td>
<td>Relative lock-time enables a transaction output to be banned for a relative amount of time after the transaction.CheckSequenceVerify.Median time-past removes the incentive for a miner to use a future block timestamp to grab more transaction fees.</td>
<td>Softfork</td>
<td>Successful rollout using 95% versionbits signaling.</td>
</tr>
<tr>
<td>23 July 2017</td>
<td>477,800</td>
<td>BIP91</td>
<td>This temporary softfork makes signaling for the SegWit upgrade mandatory.</td>
<td>Softfork</td>
<td>Softfork successfully activated with an 80% miner threshold over a 336-block period, although only a tiny minority of users enforced BIP91 rules, which have since expired.  Therefore, the risk of a chainsplit was elevated in this period.</td>
</tr>
<tr>
<td>01 Aug 2017</td>
<td>478,479</td>
<td>BIP148</td>
<td>This temporary softfork makes signaling for the SegWit upgrade mandatory for a two week period following 1 August 2017.</td>
<td>Softfork</td>
<td>Flag-day softfork appeared to succeed with no issues, although only a minority of users enforced BIP148 rules, which have since expired. Therefore, the risk of a chainsplit was elevated in this period.</td>
</tr>
<tr>
<td>24 Aug 2017</td>
<td>481,824</td>
<td>BIP141，BIP143，BIP147</td>
<td>The segregated-witness (SegWit) upgrade.</td>
<td>Softfork</td>
<td>Rollout using 95% versionbits signaling.</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-rpc-commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-rpc-commands/" class="post-title-link" itemprop="url">bitcoin-rpc commands</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2018-09-13 11:36:15 / 修改时间：16:58:04" itemprop="dateCreated datePublished" datetime="2018-09-13T11:36:15+08:00">2018-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>641</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://chainquery.com/bitcoin-api/getreceivedbyaccount">bitcoin JSON-RPC</a></p>
<h2 id="listaddressgroupings"><a href="#listaddressgroupings" class="headerlink" title="listaddressgroupings"></a>listaddressgroupings</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">listaddressgroupings</span><br><span class="line"></span><br><span class="line">Lists groups of addresses which have had their common ownership</span><br><span class="line">made public by common use as inputs or as the resulting change</span><br><span class="line">in past transactions</span><br><span class="line"></span><br><span class="line">Result:</span><br><span class="line">[</span><br><span class="line">  [</span><br><span class="line">    [</span><br><span class="line">      &quot;address&quot;,            (string) The bitcoin address</span><br><span class="line">      amount,                 (numeric) The amount in BTC</span><br><span class="line">      &quot;account&quot;             (string, optional) DEPRECATED. The account</span><br><span class="line">    ]</span><br><span class="line">    ,...</span><br><span class="line">  ]</span><br><span class="line">  ,...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">&gt; bitcoin-cli listaddressgroupings</span><br><span class="line">&gt; curl --user myusername --data-binary &#x27;&#123;&quot;jsonrpc&quot;: &quot;1.0&quot;, &quot;id&quot;:&quot;curltest&quot;, &quot;method&quot;: &quot;listaddressgroupings&quot;, &quot;params&quot;: [] &#125;&#x27; -H &#x27;content-type: text/plain;&#x27; http://127.0.0.1:8332/</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/09/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/primecoin/mining-getwork/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/primecoin/mining-getwork/" class="post-title-link" itemprop="url">mining-getwork</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2018-09-11 18:22:51 / 修改时间：18:40:04" itemprop="dateCreated datePublished" datetime="2018-09-11T18:22:51+08:00">2018-09-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="getwork"><a href="#getwork" class="headerlink" title="getwork"></a>getwork</h2><p>2012年末 废弃<br><a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Getwork">Getwork</a><br>getwork is a JSON-RPC method sent over a HTTP transport.<br>getwork 比较方便也非常好理解，直接连接到矿池挖矿。只需要填入矿池地址、端口、用户名、密码就可以了<br>端口 8332<br>getwork has been removed in v0.10.0</p>
<p>because it does not easily support mining at hash rates above 4 GH/s.<br>superceded by the newer getblocktemplate mining protocol</p>
<p>POW 的计算就是算区块头的 hash 值，使其小于目标值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int32_t nVersion;       //版本号，4字节</span><br><span class="line">uint256 hashPrevBlock;  //前一个区块的区块头hash值，32字节</span><br><span class="line">uint256 hashMerkleRoot; //包含进本区块的所有交易构造的Merkle树根，32字节</span><br><span class="line">uint32_t nTime;         //Unix时间戳，4字节</span><br><span class="line">uint32_t nBits;         //记录本区块难度，4字节</span><br><span class="line">uint32_t nNonce;        //随机数，4字节</span><br></pre></td></tr></table></figure>
<p>nVersion，区块版本号，只有在升级时候才会改变。<br>hashPrevBlock，由前一个区块决定。<br>nBits，由全网决定，每2016个区块重新调整，调整算法固定。<br>因此以上3个字段可以理解为是固定的，对于每个矿工来说都一样。</p>
<p>矿工可以自由调整的地方是剩下的3个字段。<br>nNonce，提供2^32种可能取值。<br>nTime，其实本字段能提供的值空间非常有限，因为合理的区块时间有一个范围，这个范围是根据前一个区块时间来定，比前一个区块时间太早或者太超前都会被其他节点拒绝。值得一提的是，后一个区块的区块时间略早于前一个区块时间，这是允许的。一般来说，矿工会直接使用机器当前时间戳。<br>hashMerkleRoot，理论上提供2^256种可能，本字段的变化来自于对包含进区块的交易进行增删，或改变顺序，或者修改Coinbase交易的输入字段。</p>
<p>矿池通过修改 coinbase 交易里面的 extraNonce，让每个矿工计算不同的header</p>
<p>比特币挖矿的逻辑过程如下：</p>
<ol>
<li>打包交易，检索待确认交易内存池，选择包含进区块的交易。矿工可以任意选择，甚至可以不选择（挖空块），<br>因为每一个区块有容量限制（当前是1M），所以矿工也不能无限选择。对于矿工来说，最合理的策略是首先根据手续费对待确认交易集进行排序，然后由高到低尽量纳入最多的交易。</li>
<li>构造 Coinbase ，确定了包含进区块的交易集后，就可以统计本区块手续费总额，结合产出规则，矿工可以计算自己本区块的收益。</li>
<li>构造hashMerkleRoot，对所有交易构造Merkle树。</li>
<li>填充其他字段，获得完整区块头。</li>
<li>Hash运算，对区块头进行SHA256D运算。</li>
<li>验证结果，如果符合难度，则广播到全网，挖下一个块；不符合难度则根据一定策略改变以上某个字段后再进行Hash运算并验证。</li>
</ol>
<p>此外难度有最低限制，也就是说 有个最大值，比特币最低难度取值nBits=0x1d00ffff，<br>对应的最大目标值为：0x00000000FFFF0000000000000000000000000000000000000000000000000000</p>
<p>rpc request</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&quot;method&quot;:&quot;getwork&quot;,&quot;params&quot;:[],&quot;id&quot;:1&#125;</span><br></pre></td></tr></table></figure>

<p>不带参数调用getwork，返回数据如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;midstate&quot; : &quot;9226a024e0b77f61d49fd5ffdf828c6b5c4330c61ea2778c606a8e49d4ad8bd6&quot;,</span><br><span class="line">&quot;data&quot; :&quot;00000002e9337bac28ee28a949d2140f9fb0a0ab740acfd739d7bcf67ca31c2301db858ad2ca54d92c8c1cded715922c4df2b07d9f10fa1a6cf3db7e949b320615761ed4581c76f21b12d87500000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000080020000&quot;,</span><br><span class="line">&quot;hash1&quot; :&quot;00000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000010000&quot;,</span><br><span class="line">&quot;target&quot; : &quot;00000000000000000000000000000000000000000000000075d8120000000000&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Data字段</p>
<p>共128字节（80区块头字节 + 48补全字节），因为SHA256将输入数据切分成固定长度的分片处理，每个切片64字节，<br>输入总长度必须是64字节的整数倍，输入长度一般不符合要求，则根据一定规则在元数据末端补全数据。<br>其实对于挖矿来说，补全数据是固定不变的，这里没必要提供，外部挖矿软件可以自行补齐。<br>甚至连nNonce字段都不需要提供，data最少只需要提供前面的76字节就够了。nTime字段也是必不可少的，外部挖矿程序需要参照节点提供的区块时间来调节nTime。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/72/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/72/">72</a><span class="page-number current">73</span><a class="page-number" href="/page/74/">74</a><span class="space">&hellip;</span><a class="page-number" href="/page/128/">128</a><a class="extend next" rel="next" href="/page/74/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郑  君</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2.1m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">31:18</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/code-unfold.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
