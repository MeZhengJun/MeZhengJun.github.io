<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="LiWuK0jxrq55oR5-aNOK6r0wFuUC8EvSlpNYhiiBkDk">
  <meta name="baidu-site-verification" content="code-MRwc3a52M3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhengjun.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:type" content="website">
<meta property="og:title" content="郑君的学习笔记">
<meta property="og:url" content="http://zhengjun.top/page/76/index.html">
<meta property="og:site_name" content="郑君的学习笔记">
<meta property="og:description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郑  君">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://zhengjun.top/page/76/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/76/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>郑君的学习笔记</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="郑君的学习笔记" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">郑君的学习笔记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">要比昨天进步一点点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">214</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">80</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">1272</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郑  君"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">郑  君</p>
  <div class="site-description" itemprop="description">C++，golang，Java，Python，Kotlin，区块链，全栈</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1272</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">80</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">214</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ZhengHanYunBlog" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZhengHanYunBlog" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhenghanyun2021@126.com" title="E-Mail → mailto:zhenghanyun2021@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCmh8TlSil0IrCA-AQ9Xx9_Q" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCmh8TlSil0IrCA-AQ9Xx9_Q" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/27/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-address/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/27/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-address/" class="post-title-link" itemprop="url">bitcoin-address</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-27 06:43:53" itemprop="dateCreated datePublished" datetime="2018-08-27T06:43:53+08:00">2018-08-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-10-25 08:59:16" itemprop="dateModified" datetime="2018-10-25T08:59:16+08:00">2018-10-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>480</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Address">ref</a></p>
<p>There are currently three address formats in use:<br>P2PKH which begin with the number 1, eg: 1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2.<br>P2SH type starting with the number 3, eg: 3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy.<br>Bech32 type starting with bc1, eg: bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf5mdq.</p>
<h1 id="Misconceptions"><a href="#Misconceptions" class="headerlink" title="Misconceptions"></a>Misconceptions</h1><h2 id="Address-reuse"><a href="#Address-reuse" class="headerlink" title="Address reuse"></a>Address reuse</h2><p>Addresses are not intended to be used more than once, and doing so has numerous problems associated. See the dedicated article on <a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Address_reuse">address reuse</a> for more details.</p>
<img alt="33b210fc.png" src="/2018/08/27/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-address/33b210fc.png" width height>

<h2 id="List-of-address-prefixes"><a href="#List-of-address-prefixes" class="headerlink" title="List of address prefixes"></a>List of address prefixes</h2><img alt="31dc90c3.png" src="/2018/08/27/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-address/31dc90c3.png" width height>

<h2 id="Conversion-from-ECDSA-public-key-to-Bitcoin-address"><a href="#Conversion-from-ECDSA-public-key-to-Bitcoin-address" class="headerlink" title="Conversion from ECDSA public key to Bitcoin address"></a>Conversion from ECDSA public key to Bitcoin address</h2><img alt="6a42dc8e.png" src="/2018/08/27/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-address/6a42dc8e.png" width height>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/25/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/go/go-package/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/25/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/go/go-package/" class="post-title-link" itemprop="url">go-package</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-25 07:56:39" itemprop="dateCreated datePublished" datetime="2018-08-25T07:56:39+08:00">2018-08-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-07-11 14:52:32" itemprop="dateModified" datetime="2019-07-11T14:52:32+08:00">2019-07-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>793</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>cannot import main package.<br>you can put code in one package for other package use.</p>
<h1 id="包管理工具-dep"><a href="#包管理工具-dep" class="headerlink" title="包管理工具 dep"></a>包管理工具 dep</h1><p>go get -u github.com/golang/dep/cmd/dep</p>
<p>下载二进制文件<br><a target="_blank" rel="noopener" href="https://github.com/golang/dep/releases">https://github.com/golang/dep/releases</a></p>
<p>将dep-windows-amd64.exe放入GOPATH/bin下，修改名称为dep</p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><ol>
<li>切换到工程目录下cd %GOPATH%/src/github.com/xxx/dep-demo</li>
<li>初始化dep init</li>
</ol>
<h2 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h2><p>预先添加到vendor中<br>dep ensure -add github.com/foo/bar github.com/baz/quux</p>
<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>dep ensure -update</p>
<h2 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h2><p>四种情况：工程中引入包、移除包、Gopkg.toml规则修改、不确定情况</p>
<p>dep ensure</p>
<p>查看状态<br>运行<br>dep status<br>结果解释<br>CONSTRAINT为Gopkg.toml中限定的版本；<br>VERSION为当前vendor中的版本；<br>REVISION为当前vendor中的修订号；<br>LATEST为CONSTRAINT限定下github中能满足要求的最新版本。<br>修改限定版本并同步<br>修改Gopkg.toml中的CONSTRAINT，若使得LATEST低于当前vendor中的版本，则运行dep ensure后，vendor中的版本降低到能满足要求的最新版本；<br>若使得LATEST高于vendor中的版本，则运行dep ensure后，vendor中的版本不变，可使用dep ensure -update更新vendor到LATEST版本。</p>
<p>作者：gisxiaowei<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e3c9f9039542">https://www.jianshu.com/p/e3c9f9039542</a><br>来源：简书<br>简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/24/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/go/go-json-operation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/24/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/go/go-json-operation/" class="post-title-link" itemprop="url">go-json operation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-24 15:46:07" itemprop="dateCreated datePublished" datetime="2018-08-24T15:46:07+08:00">2018-08-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-10-22 10:58:42" itemprop="dateModified" datetime="2019-10-22T10:58:42+08:00">2019-10-22</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://github.com/antonholmquist/jason">https://github.com/antonholmquist/jason</a></p>
<h2 id="parsing-json"><a href="#parsing-json" class="headerlink" title="parsing json"></a>parsing json</h2><p>must be predefined a struct.</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s Serverslice</span><br><span class="line">str := <span class="string">`&#123;&quot;servers&quot;:[&#123;&quot;serverName&quot;:&quot;Shanghai_VPN&quot;,&quot;serverIP&quot;:&quot;127.0.0.1&quot;&#125;,&#123;&quot;serverName&quot;:&quot;Beijing_VPN&quot;,&quot;serverIP&quot;:&quot;127.0.0.2&quot;&#125;]&#125;`</span></span><br><span class="line">json.Unmarshal([]<span class="keyword">byte</span>(str), &amp;s)</span><br><span class="line">fmt.Println(s)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> response2 <span class="keyword">struct</span> &#123;</span><br><span class="line">    Page   <span class="keyword">int</span>      <span class="string">`json:&quot;page&quot;`</span></span><br><span class="line">    Fruits []<span class="keyword">string</span> <span class="string">`json:&quot;fruits&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">res := response2&#123;&#125;</span><br><span class="line">json.Unmarshal([]<span class="keyword">byte</span>(str), &amp;res)</span><br></pre></td></tr></table></figure>

<h2 id="json-Decoder-vs-json-Unmarshal"><a href="#json-Decoder-vs-json-Unmarshal" class="headerlink" title="json.Decoder vs json.Unmarshal"></a>json.Decoder vs json.Unmarshal</h2><p><a target="_blank" rel="noopener" href="https://ahmet.im/blog/golang-json-decoder-pitfalls/">Go json.Decoder Considered Harmful</a><br>short answer is :<br>Do not use json.Decoder if you are not dealing with JSON streaming.</p>
<p>Use json.Unmarshal:</p>
<ul>
<li>if you don’t know what Go JSON streams are</li>
<li>if you are working with a single JSON object at a time</li>
<li>if there is a remote possibility that the API may return malformed JSON</li>
</ul>
<h2 id="arbitrary-json-operate"><a href="#arbitrary-json-operate" class="headerlink" title="arbitrary json operate"></a>arbitrary json operate</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;log&quot;</span></span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">  <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  b := []<span class="keyword">byte</span>(<span class="string">`&#123;&quot;name&quot;: &quot;tom&quot;, &quot;favNum&quot;: 6, &quot;interests&quot;: [&quot;knives&quot;, &quot;computers&quot;], &quot;usernames&quot;: &#123;&quot;github&quot;: &quot;TomNomNom&quot;, &quot;twitter&quot;: &quot;@TomNomNom&quot;&#125;&#125;`</span>)</span><br><span class="line">  <span class="keyword">var</span> f <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">  err := json.Unmarshal(b, &amp;f) </span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.Fatal(<span class="string">&quot;Failed to parse JSON&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  m := f.(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line">  printStruct(<span class="string">&quot;&quot;</span>, m)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printStruct</span><span class="params">(prefix <span class="keyword">string</span>, m <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123; </span><br><span class="line">    <span class="keyword">switch</span> vv := v.(<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">string</span>:</span><br><span class="line">      fmt.Println(prefix, k, <span class="string">&quot;is string&quot;</span>, vv) </span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">      fmt.Println(prefix, k, <span class="string">&quot;is number&quot;</span>, vv) </span><br><span class="line">    <span class="keyword">case</span> []<span class="keyword">interface</span>&#123;&#125;:</span><br><span class="line">      fmt.Println(prefix, k, <span class="string">&quot;is an array:&quot;</span>)</span><br><span class="line">      <span class="keyword">for</span> i, u := <span class="keyword">range</span> vv &#123;</span><br><span class="line">        fmt.Println(prefix, i, u)</span><br><span class="line">      &#125;   </span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;:</span><br><span class="line">      fmt.Println(prefix, k, <span class="string">&quot;is a map:&quot;</span>)</span><br><span class="line">      printStruct(prefix + <span class="string">&quot;  &quot;</span>, vv) </span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      fmt.Println(prefix, k, <span class="string">&quot;is a type we can&#x27;t handle&quot;</span>, vv) </span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ref:  http://michaelheap.com/golang-encodedecode-arbitrary-json/  18/8/15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Using some hand crafted JSON. This could come from a file, web service, anything</span></span><br><span class="line">str2 := <span class="string">`&#123;</span></span><br><span class="line"><span class="string">    &quot;foo&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;baz&quot;: [</span></span><br><span class="line"><span class="string">            1,</span></span><br><span class="line"><span class="string">            2,</span></span><br><span class="line"><span class="string">            3</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    &quot;flag&quot;: true,</span></span><br><span class="line"><span class="string">    &quot;list&quot;: [</span></span><br><span class="line"><span class="string">        &quot;one&quot;,</span></span><br><span class="line"><span class="string">        2,</span></span><br><span class="line"><span class="string">        true,</span></span><br><span class="line"><span class="string">        &quot;4&quot;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            &quot;key&quot;: &quot;value&quot;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        [</span></span><br><span class="line"><span class="string">            1,</span></span><br><span class="line"><span class="string">            true</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> y <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">json.Unmarshal([]<span class="keyword">byte</span>(str2), &amp;y)</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;%+v\n&quot;</span>, y)</span><br><span class="line"><span class="comment">//# =&gt; map[foo:map[baz:[1 2 3]] flag:true list:[one 2 true 4 map[key:value] [1 true]]]</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">As we’re un-marshalling into an interface, we need to inform go what data type</span></span><br><span class="line"><span class="comment">each key is before we can perform operations on it. Go provides a the &quot;reflect&quot;</span></span><br><span class="line"><span class="comment">package which we can use to process arbitrarily complex data structures:</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">    the_list := y[<span class="string">&quot;list&quot;</span>].([]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">    <span class="keyword">for</span> n, v := <span class="keyword">range</span> the_list &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;index:%d  value:%v  kind:%s  type:%s\n&quot;</span>, n, v, reflect.TypeOf(v).Kind(), reflect.TypeOf(v))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//# =&gt;</span></span><br><span class="line">    <span class="comment">//index:0  value:one  kind:string  type:string</span></span><br><span class="line">    <span class="comment">//index:1  value:2  kind:float64  type:float64</span></span><br><span class="line">    <span class="comment">//index:2  value:true  kind:bool  type:bool</span></span><br><span class="line">    <span class="comment">//index:3  value:4  kind:string  type:string</span></span><br><span class="line">    <span class="comment">//index:4  value:map[key:value]  kind:map  type:map[string]interface &#123;&#125;</span></span><br><span class="line">    <span class="comment">//index:5  value:[1 true]  kind:slice  type:[]interface &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="map-to-json"><a href="#map-to-json" class="headerlink" title="map to json"></a>map to json</h2><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Marshal the map into a JSON string.</span></span><br><span class="line">empData, err := json.Marshal(emp)	</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err.Error())</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonStr := <span class="keyword">string</span>(empData)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/24/%E5%B7%A5%E5%85%B7%E7%B1%BB/git/git-working-repo-vs-bare-repo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/24/%E5%B7%A5%E5%85%B7%E7%B1%BB/git/git-working-repo-vs-bare-repo/" class="post-title-link" itemprop="url">git-working repo vs bare repo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2018-08-24 06:51:59 / 修改时间：10:07:50" itemprop="dateCreated datePublished" datetime="2018-08-24T06:51:59+08:00">2018-08-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">工具相关</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>When I first create a repository by git, usually use <code>git init</code>.<br>But sometimes I see someone use <code>git --bare init</code>, especially I study an article that use bare git repo deploy website.</p>
<p>what’s the difference?</p>
<p>So I do some study with it.</p>
<p>Short answer:<br>Use a non-bare repository to work locally and a bare repository as a central server/hub to share your changes with other people.</p>
<img alt="203f8fc3.png" src="/2018/08/24/%E5%B7%A5%E5%85%B7%E7%B1%BB/git/git-working-repo-vs-bare-repo/203f8fc3.png" width height>

<p><a target="_blank" rel="noopener" href="http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/">ref</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/08/24/%E5%B7%A5%E5%85%B7%E7%B1%BB/git/git-working-repo-vs-bare-repo/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/23/%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7/SSH-%E8%AE%BE%E7%BD%AE%E7%99%BB%E5%BD%95%E4%B8%8D%E5%90%8C%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/23/%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%85%B6%E4%BB%96%E5%B7%A5%E5%85%B7/SSH-%E8%AE%BE%E7%BD%AE%E7%99%BB%E5%BD%95%E4%B8%8D%E5%90%8C%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">SSH 设置登录不同服务器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-23 19:57:29" itemprop="dateCreated datePublished" datetime="2018-08-23T19:57:29+08:00">2018-08-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-08-28 09:24:34" itemprop="dateModified" datetime="2018-08-28T09:24:34+08:00">2018-08-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">工具相关</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>376</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>SSH（Secure Shell）</p>
<p>SSH 的配置文件有两个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">~/.ssh/config            # 用户配置文件</span><br><span class="line">/etc/ssh/ssh_config      # 系统配置文件</span><br></pre></td></tr></table></figure>

<p><code>~/.ssh/config</code> 文件配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host example                       # 关键词</span><br><span class="line">    HostName example.com           # 主机地址</span><br><span class="line">    User root                      # 用户名</span><br><span class="line">    # IdentityFile ~/.ssh/id_ecdsa # 认证文件</span><br><span class="line">    # Port 22                      # 指定端口</span><br></pre></td></tr></table></figure>
<p>通过执行 $ ssh example 我就可以登录我的服务器。而不需要敲更多的命令 $ ssh <a href="mailto:&#114;&#111;&#111;&#x74;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#x6c;&#x65;&#46;&#x63;&#111;&#x6d;">&#114;&#111;&#111;&#x74;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#x6c;&#x65;&#46;&#x63;&#111;&#x6d;</a>。<br>又如我们想要向服务器传文件 $ scp a.txt example:/home/user_name。比以前方便多了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MacOS/mac-wireshark-%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MacOS/mac-wireshark-%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">mac-wireshark 权限问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-23 14:32:19" itemprop="dateCreated datePublished" datetime="2018-08-23T14:32:19+08:00">2018-08-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-09-18 17:03:18" itemprop="dateModified" datetime="2018-09-18T17:03:18+08:00">2018-09-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>140</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="you-don’t-have-permission-to-capture-on-that-device-mac"><a href="#you-don’t-have-permission-to-capture-on-that-device-mac" class="headerlink" title="you don’t have permission to capture on that device mac"></a>you don’t have permission to capture on that device mac</h2><ol>
<li>终端输入 <code>whoami</code>，查看用户名</li>
<li>执行下面命令，切换用户<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /dev</span><br><span class="line">sudo chown your_name_here:admin bp*</span><br></pre></td></tr></table></figure></li>
<li><code>ls -la | grep bp</code> 应该看到所属用户是指定的</li>
</ol>
<p>可以运行了</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">linux-服务器优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2018-08-23 10:42:42 / 修改时间：14:37:00" itemprop="dateCreated datePublished" datetime="2018-08-23T10:42:42+08:00">2018-08-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">系统</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>718</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="解决大量-TIME-WAIT-问题"><a href="#解决大量-TIME-WAIT-问题" class="headerlink" title="解决大量 TIME_WAIT 问题"></a>解决大量 TIME_WAIT 问题</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netstat -n | awk &#x27;/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;&#x27;</span><br><span class="line">返回：</span><br><span class="line">TIME_WAIT 41735</span><br><span class="line">CLOSE_WAIT 145</span><br><span class="line">FIN_WAIT2 3</span><br><span class="line">ESTABLISHED 413</span><br></pre></td></tr></table></figure>

<h3 id="优化配置"><a href="#优化配置" class="headerlink" title="优化配置"></a>优化配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo nano /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">添加下面内容：</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_fin_timeout = 30</span><br><span class="line"></span><br><span class="line">参数生效</span><br><span class="line">/sbin/sysctl -p</span><br></pre></td></tr></table></figure>

<h3 id="修改说明："><a href="#修改说明：" class="headerlink" title="修改说明："></a>修改说明：</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net.ipv4.tcp_syncookies = 1 表示开启SYN cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1 表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1 表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭。</span><br><span class="line">net.ipv4.tcp_fin_timeout 修改系統默认的 TIMEOUT 时间</span><br></pre></td></tr></table></figure>

<p>TIME_WAIT 状态产生：<br>客户端与服务器端建立TCP/IP连接后关闭SOCKET后，服务器端连接的端口状态为TIME_WAIT<br>主动关闭的一方在发送最后一个 ack 后就会进入 TIME_WAIT 状态 停留2MSL（max segment lifetime）时间<br>这个是TCP/IP必不可少的</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-p2p%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-p2p%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">bitcoin-p2p协议</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-23 09:53:29" itemprop="dateCreated datePublished" datetime="2018-08-23T09:53:29+08:00">2018-08-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-09-18 17:22:10" itemprop="dateModified" datetime="2018-09-18T17:22:10+08:00">2018-09-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>需要握手之后才能发送其他命令，握手流程如下：<br><img alt="54cd7de8.png" src="/2018/08/23/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-p2p%E5%8D%8F%E8%AE%AE/54cd7de8.png" width height></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">version&lt;---&gt;verack</span><br><span class="line">ping&lt;---&gt;pong</span><br><span class="line">addr&lt;---&gt;addr</span><br><span class="line">getaddr&lt;---&gt;addr</span><br><span class="line">SendHeaders---&gt;</span><br><span class="line">SendCmpct---&gt;</span><br><span class="line">FEEFILTER---&gt;</span><br><span class="line">GETHEADERS&lt;---&gt; Headers</span><br></pre></td></tr></table></figure>

<p>0.8.6 版本</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">version&lt;---&gt;verack</span><br><span class="line">ping&lt;---&gt;pong</span><br><span class="line">addr&lt;---&gt;addr</span><br><span class="line">getaddr&lt;---&gt;addr</span><br><span class="line">SendHeaders---&gt;</span><br><span class="line">SendCmpct---&gt;</span><br><span class="line">FEEFILTER---&gt;</span><br><span class="line">getblocks&lt;----&gt;inv</span><br><span class="line">getdata&lt;---&gt;block； spv wallet response merkleblock</span><br></pre></td></tr></table></figure>

<p>Message structure</p>
<table>
<thead>
<tr>
<th>Field Size</th>
<th>Description</th>
<th>Data type</th>
<th>Comments</th>
</tr>
</thead>
<tbody><tr>
<td>4</td>
<td>magic</td>
<td>uint32_t</td>
<td>Magic value indicating message origin network, and used to seek to next message when stream state is unknown</td>
</tr>
<tr>
<td>12</td>
<td>command</td>
<td>char[12]</td>
<td>ASCII string identifying the packet content, NULL padded (non-NULL padding results in packet rejected)</td>
</tr>
<tr>
<td>4</td>
<td>length</td>
<td>uint32_t</td>
<td>Length of payload in number of bytes</td>
</tr>
<tr>
<td>4</td>
<td>checksum</td>
<td>uint32_t</td>
<td>First 4 bytes of sha256(sha256(payload))</td>
</tr>
<tr>
<td>?</td>
<td>payload</td>
<td>uchar[]</td>
<td>The actual data</td>
</tr>
</tbody></table>
<p>getheaders</p>
<table>
<thead>
<tr>
<th>Field Size</th>
<th>Description</th>
<th>Data type</th>
<th>Comments</th>
</tr>
</thead>
<tbody><tr>
<td>4</td>
<td>version</td>
<td>uint32_t</td>
<td>the protocol version</td>
</tr>
<tr>
<td>1+</td>
<td>hash count</td>
<td>var_int</td>
<td>number of block locator hash entries</td>
</tr>
<tr>
<td>32+</td>
<td>block locator hashes</td>
<td>char[32]</td>
<td>block locator object; newest back to genesis block (dense to start, but then sparse)</td>
</tr>
<tr>
<td>32</td>
<td>hash_stop</td>
<td>char[32]</td>
<td>hash of the last desired block header; set to zero to get as many blocks as possible (2000)</td>
</tr>
</tbody></table>
<p>API wallet<br>A wallet that relies on a central server like Electrum could be called an API wallet. This wallet will only connect to one or more servers and speak to the server using the API there. It will implicitly trust what the servers tell it and it won’t download the whole blockchain.</p>
<p>Autotip chrome extension. It’s similar to SPV in that it doesn’t download the whole blockchain, but is different in that not even headers are downloaded.</p>
<p>When an API wallet wants to send bitcoin the following process occurs:</p>
<ol>
<li>Call to UTXO source (via blockchain.info/blockr.io/blocktrail/etc)</li>
<li>Pass desired UTXO into Transaction library (such as Bitcore or Moneywagon)</li>
<li>Pass in private key to transaction library to sign desired inputs from step 2</li>
<li>Decode transaction object from JS/python/C#/whatever type to hex type.</li>
<li>Send hex data of transaction through PushTX (via blockchain.info/blockr.io/etc)</li>
<li>Short Poll “unconfirmed transaction” until your newly pushed TX gets confirmed.</li>
<li>You are done!</li>
</ol>
<p>SPV wallet</p>
<h2 id="spv-操作"><a href="#spv-操作" class="headerlink" title="spv 操作"></a>spv 操作</h2><p>只下载 headers</p>
<p>SPV verification<br><a target="_blank" rel="noopener" href="https://www.reddit.com/r/Bitcoin/comments/2feox9/electrum_securityprivacy_model/">https://www.reddit.com/r/Bitcoin/comments/2feox9/electrum_securityprivacy_model/</a></p>
<p>I am the main developer of Electrum. The original post contains statements that are not true. Electrum does indeed connect to a single server in order to fetch transactions and address histories. However, it also connects to MANY servers in order to fetch block headers, find and verify the longest chain, and verify that all the transactions in its history are consistent with the blockchain, using SPV.</p>
<p>SPV is a way to check that all transactions received by the client are in the blockchain. However, SPV is not a proof of completeness: the client has no proof that it received all the transactions that are relevant to its wallet (the nodes you are talking to could be lying by omission). Electrum currently does not have a way to verify completeness of its history (although this will be addressed soon). Note that clients using bloom filters (Multibit) have exactly the same weakness: they can verify the transactions they receive (using spv), but they lack a proof of completeness too.</p>
<p>One security advantage of Electrumis that servers are authenticated using SSL; this provides protection against MITM attacks, which is a problem for thin clients, including bloom filter clients. However, this advantage comes at the cost of privacy, because the main Electrum server you use knowns which addresses you are using; bloom filter clients have more privacy (although I believe the default setting in Multibit is to favor speed at the expense of privacy).</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/22/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-generate-%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/22/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8C%BA%E5%9D%97%E9%93%BE/bitcoin/bitcoin-generate-%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">bitcoin-generate 命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-22 11:59:25" itemprop="dateCreated datePublished" datetime="2018-08-22T11:59:25+08:00">2018-08-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-09-14 10:13:24" itemprop="dateModified" datetime="2018-09-14T10:13:24+08:00">2018-09-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>31</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>wallet.cpp</p>
<p>std::vector<CWalletRef> vpwallets;</CWalletRef></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2018/08/22/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/linux/linux-%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85tcpdump/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/22/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/linux/linux-%E7%BD%91%E7%BB%9C%E6%8A%93%E5%8C%85tcpdump/" class="post-title-link" itemprop="url">linux 网络抓包tcpdump</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-08-22 09:33:48" itemprop="dateCreated datePublished" datetime="2018-08-22T09:33:48+08:00">2018-08-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-01 15:35:38" itemprop="dateModified" datetime="2022-02-01T15:35:38+08:00">2022-02-01</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">系统</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>315</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="抓取指定端口"><a href="#抓取指定端口" class="headerlink" title="抓取指定端口"></a>抓取指定端口</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">这个可能没用</span><br><span class="line">// sudo apt install apparmor-profiles</span><br><span class="line"></span><br><span class="line">查看 AppArmor 状态</span><br><span class="line">sudo aa-status</span><br><span class="line"></span><br><span class="line">tcpdump tcp port 5168 -C 1 -w ./5168.cap</span><br><span class="line"></span><br><span class="line">tcpdump -i eth0 -n -w out.pcap -C 1 -Z root</span><br><span class="line">返回  Permission denied</span><br><span class="line">sudo apt-get install apparmor-utils</span><br><span class="line">设置模式</span><br><span class="line">aa-complain /usr/sbin/tcpdump</span><br><span class="line">查看使用的模式</span><br><span class="line">grep tcpdump /sys/kernel/security/apparmor/profiles</span><br><span class="line">返回状态 (enforce) or (complain)，需要的是 complain 状态</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/75/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/75/">75</a><span class="page-number current">76</span><a class="page-number" href="/page/77/">77</a><span class="space">&hellip;</span><a class="page-number" href="/page/128/">128</a><a class="extend next" rel="next" href="/page/77/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郑  君</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2.1m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">31:18</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/code-unfold.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
