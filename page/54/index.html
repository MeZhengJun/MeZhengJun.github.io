<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="LiWuK0jxrq55oR5-aNOK6r0wFuUC8EvSlpNYhiiBkDk">
  <meta name="baidu-site-verification" content="code-MRwc3a52M3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhengjun.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:type" content="website">
<meta property="og:title" content="郑君的学习笔记">
<meta property="og:url" content="http://zhengjun.top/page/54/index.html">
<meta property="og:site_name" content="郑君的学习笔记">
<meta property="og:description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郑  君">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://zhengjun.top/page/54/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/54/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>郑君的学习笔记</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="郑君的学习笔记" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">郑君的学习笔记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">要比昨天进步一点点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">215</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">80</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">1286</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郑  君"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">郑  君</p>
  <div class="site-description" itemprop="description">C++，golang，Java，Python，Kotlin，区块链，全栈</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1286</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">80</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">215</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ZhengHanYunBlog" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZhengHanYunBlog" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhenghanyun2021@126.com" title="E-Mail → mailto:zhenghanyun2021@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCmh8TlSil0IrCA-AQ9Xx9_Q" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCmh8TlSil0IrCA-AQ9Xx9_Q" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/12/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/%E6%95%B0%E6%8D%AE%E5%BA%93/database-access/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/12/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/%E6%95%B0%E6%8D%AE%E5%BA%93/database-access/" class="post-title-link" itemprop="url">database access</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-12 17:34:32" itemprop="dateCreated datePublished" datetime="2019-04-12T17:34:32+08:00">2019-04-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-04-19 18:05:12" itemprop="dateModified" datetime="2019-04-19T18:05:12+08:00">2019-04-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <img alt="26c9b1c8.png" src="/2019/04/12/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/%E6%95%B0%E6%8D%AE%E5%BA%93/database-access/26c9b1c8.png" width height>
2009年4月15日星期三 哈哈，10年前的技术，目前我还在使用
Access Database method with VC++，按时间顺序排列目前最后的技术是ADO
1.ODBC API； 
2.MFC ODBC类； 
3.MFC DAO类；(数据访问对象)  访问access数据库性能最好
4.MFC的OLE/DB
5.ActiveX数据对象(ADO)

<p>As of Visual C++ .NET, the Visual C++ environment and wizards no longer support DAO (although the DAO classes are included and you can still use them). Microsoft recommends that you use OLE DB Templates or ODBC for new projects. You should only use DAO in maintaining existing applications. </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">CString <span class="title">CApp1Set::GetDefaultConnect</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;ODBC;DSN=afx;Trusted_Connection=Yes;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ODBC"><a href="#ODBC" class="headerlink" title="ODBC"></a>ODBC</h1><p>ODBC is an interface to access database management systems (DBMS). ODBC was developed by SQL Access Group in 1992 at a time, when there were no standard medium to communicate between a database and an application. It does not depend on a specific programming language or a database system or an operating system. Programmers can use ODBC interface to write applications that can query data from any database, regardless of the environment it is running on or the type of DBMS it uses.</p>
<h1 id="ADO"><a href="#ADO" class="headerlink" title="ADO"></a>ADO</h1><p>ADO is a collection of COM (Component Object Mode) objects that act as an interface for accessing data in data sources. ADO was developed in 1996 by Microsoft as a part of the Microsoft Data Access Components (MDAC). ADO forms a middleware layer between applications written in some programming language and OLE DB (a data API developed by Microsoft and the successor to ODBC). Programmers can use ADO to access data without knowing the underlying implementation details of the database. Although you are not required to know any SQL to use ADO, you can certainly execute SQL statements using it.</p>
<h1 id="OLEDB"><a href="#OLEDB" class="headerlink" title="OLEDB"></a>OLEDB</h1><h1 id="ODBC-vs-ADO"><a href="#ODBC-vs-ADO" class="headerlink" title="ODBC vs ADO"></a>ODBC vs ADO</h1><p>ODBC is an open interface, which can be used by any application to communicate with any database system, while ADO is a wrapper around OLE DB (which is the successor to ODBC). If the database does not support OLE (non-OLE environments) then ODBC is the best choice. If the environment is non-SQL, then you have to use ADO (because ODBC works only with SQL). If interoperable database components are required, then ADO needs to be used instead of ODBC. However, for 16-bit data accessing ODBC is the only option (ADO does not support 16-bit). Finally, ADO is the best choice for connecting to multiple databases at once (ODBC can connect to only one database at a time).</p>
<h1 id="Library"><a href="#Library" class="headerlink" title="Library"></a>Library</h1><p><a target="_blank" rel="noopener" href="https://github.com/SOCI/soci">https://github.com/SOCI/soci</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/build-mqtt-client/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/build-mqtt-client/" class="post-title-link" itemprop="url">build mqtt client</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-04-12 13:59:42 / 修改时间：17:17:30" itemprop="dateCreated datePublished" datetime="2019-04-12T13:59:42+08:00">2019-04-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>51</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://slproweb.com/products/Win32OpenSSL.html">下载OPENSSL</a><br>CMake GUI (cmake.org)</p>
<h1 id="安装OpenSSL"><a href="#安装OpenSSL" class="headerlink" title="安装OpenSSL"></a>安装OpenSSL</h1><p><a target="_blank" rel="noopener" href="https://slproweb.com/products/Win32OpenSSL.html">这里下载</a></p>
<h1 id="编译Paho-C客户端"><a href="#编译Paho-C客户端" class="headerlink" title="编译Paho C客户端"></a>编译Paho C客户端</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/" class="post-title-link" itemprop="url">build mqtt client</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-12 13:59:42" itemprop="dateCreated datePublished" datetime="2019-04-12T13:59:42+08:00">2019-04-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-06-02 20:44:31" itemprop="dateModified" datetime="2019-06-02T20:44:31+08:00">2019-06-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://www.brixbot.com/coding/mqtt-04-build-paho-c-for-windows/">原文链接</a></p>
<p><a target="_blank" rel="noopener" href="https://slproweb.com/products/Win32OpenSSL.html">下载OPENSSL</a><br>CMake GUI (cmake.org)</p>
<h1 id="安装OpenSSL"><a href="#安装OpenSSL" class="headerlink" title="安装OpenSSL"></a>安装OpenSSL</h1><p>下载32位版本：Win32 OpenSSL v1.1.1<br><a target="_blank" rel="noopener" href="https://slproweb.com/products/Win32OpenSSL.html">这里下载</a></p>
<h1 id="编译Paho-C客户端"><a href="#编译Paho-C客户端" class="headerlink" title="编译Paho C客户端"></a>编译Paho C客户端</h1><p>2.1 在paho.mqtt.c-master目录下新建build目录<br>2.2 运行cmake-gui<br>2.3 source code目录选择paho.mqtt.c-master目录，build目录选择C:\brixbot\paho.mqtt.c-master/build目录。<br>2.4 点击Configure按钮，在弹出的对话框中选择你要生成工程文件的Visual Studio版本。在本文中选择的是Visual Studio 14 2015 Win64。</p>
<img alt="20190418_185524.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_185524.png" width="400" height>

<p>2.5 点击Finish按钮关闭上面的对话框。此时，cmake-gui会出现可设置的编译选项。按照下图进行设置。</p>
<img alt="20190418_185622.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_185622.png" width="400" height>

<p>2.6 点击Configure按钮，此时会 弹出“Error in configuration process, project files may be invalid”的出错对话框。这是因为我们在刚刚的设置中要求把SSL支持编译进去，但SSL相关编译选项还未设置的原因。点Ok按钮关闭错误对话框。此时在编译选项列表中会多出SSL相关项目。按照下图进行设置：</p>
<img alt="20190418_185630.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_185630.png" width="400" height>

<p>2.7 设置好后再次点击Configure按钮。这时输出框中应该再没有红色的错误信息。</p>
<img alt="20190418_185651.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_185651.png" width="400" height>

<p>2.8 点击Generate按钮去生成Visual Studio的工程文件。这时，Open Project按钮应该变为允许状态。<br>2.9 点击Open Project按钮去打开Visual Studio 2015的工程。打开的工程应该包含下图所示项目：</p>
<img alt="20190418_185702.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_185702.png" width="400" height>

<p>完全编译ALL_BUILD工程。如果没有错误，编译INSTALL工程。编译成功后会在 C:\Program Files (x86)\Eclipse Paho C\ 目录下面生成所有文件 </p>
<p>mqtt3a结尾的为异步版本<br>mqtt3as结尾的为支持SSL的异步版本<br>mqtt3c结尾的为同步版本<br>mqtt3cs结尾的为支持SSL的同步版本</p>
<h1 id="编译-c-客户端"><a href="#编译-c-客户端" class="headerlink" title="编译 c++ 客户端"></a>编译 c++ 客户端</h1><p><a target="_blank" rel="noopener" href="https://github.com/eclipse/paho.mqtt.cpp">github</a></p>
<p>在paho.mqtt.cpp-master目录下新建build目录<br>运行cmake-gui<br>source code目录选择paho.mqtt.cpp-master目录，build目录选择C:\brixbot\paho.mqtt.cpp-master/build目录。<br>点击Configure按钮，在弹出的对话框中选择你要生成工程文件的Visual Studio版本。在本文中选择的是Visual Studio 14 2015 x86<br><img alt="20190418_190410.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_190410.png" width="400" height></p>
<p>点击Finish按钮关闭上面的对话框此时，cmake-gui会弹出“Error in configuration process, project files may be invalid”的出错对话框。这是因为我们还未告诉CMake哪里去找Paho C的库文件。点击OK关闭对话框后cmake-gui会可设置的编译选项。按照下图进行设置。PAHO_MQTT_C_LIB选择上一讲编译出来的paho-mqtt3as.lib库文件已确保我们编译出来的Paho C++库也支持SSL。<br><img alt="20190418_190419.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_190419.png" width="400" height></p>
<p> 点击Configure按钮后cmake-gui会更新编译选项列表并列出和SSL相关的选项。检查SSL相关选项的文件名和路径是否正确。<br><img alt="20190418_190444.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_190444.png" width="400" height><br>再次点击Configure按钮。这时输出框中应该没有红色的错误信息。</p>
<img alt="20190418_190458.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_190458.png" width="400" height>

<p>点击Generate按钮去生成Visual Studio的工程文件。这时，Open Project按钮应该变为允许状态。</p>
<p>1.9 点击Open Project按钮去打开Visual Studio 2015的工程。打开的工程应该包含下图所示项目：</p>
<img alt="20190418_190624.png" src="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/build-mqtt-client/20190418_190624.png" width="400" height>

<p>1.10 和上一讲介绍的一样，我们需要修改所有工程的字符集选项为Use Unicode Character Set</p>
<h1 id="使用问题"><a href="#使用问题" class="headerlink" title="使用问题"></a>使用问题</h1><p>1&gt;d:\library\include\mqtt\thread_queue.h(79): warning C4003: not enough actual parameters for macro ‘max’<br>1&gt;d:\library\include\mqtt\thread_queue.h(79): error C2589: ‘(‘: illegal token on right side of ‘::’</p>
<p>解决方法:<br>Your problem is caused by the &lt;Windows.h&gt; header file that includes macro definitions named max and  min</p>
<p>添加个() 防止宏展开<br>size_t maxValue_ = (std::numeric_limits<size_t>::max)()<br>//             </size_t></p>
<p>You need to link with both the Paho C (libpaho-mqtt3as.so) and the Paho C++ (libpaho-mqttpp3.so). It looks like maybe you remembered the C library but forgot the C++ one?<br>Try adding “-lpaho-mqttpp3” to the compile/link line.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/HPSocket/hpsocket-study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/12/%E5%BC%80%E6%BA%90%E5%BA%93/HPSocket/hpsocket-study/" class="post-title-link" itemprop="url">hpsocket study</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-04-12 11:00:44 / 修改时间：13:32:46" itemprop="dateCreated datePublished" datetime="2019-04-12T11:00:44+08:00">2019-04-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>376</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>release 版本需要去掉依赖库 jemalloc 否则会有问题，提示 testxx 函数未找到。</p>
<h1 id="http-client-demo"><a href="#http-client-demo" class="headerlink" title="http client demo"></a>http client demo</h1><p>这个目前有问题，编译不过，稍后处理</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HPSOCKET_STATIC_LIB</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;HPSocket\HPSocket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;HPSocket\SocketInterface.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;HPSocket\HPTypeDef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _DEBUG</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib,<span class="meta-string">&quot;HPSocket\\HPSocket_D.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib,<span class="meta-string">&quot;HPSocket\\HPSocket.lib&quot;</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">IHttpClient* m_pHttpClient;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/11/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/debug/debug-Detected-memory-leaks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/11/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/debug/debug-Detected-memory-leaks/" class="post-title-link" itemprop="url">debug-Detected memory leaks</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-11 11:15:44" itemprop="dateCreated datePublished" datetime="2019-04-11T11:15:44+08:00">2019-04-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-10-18 17:14:58" itemprop="dateModified" datetime="2019-10-18T17:14:58+08:00">2019-10-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/windows/" itemprop="url" rel="index"><span itemprop="name">windows</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>284</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>常见的程序退出时，IDE显示的错误</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Detected memory leaks!</span><br><span class="line">Dumping objects -&gt;</span><br><span class="line">&#123;98500&#125; normal block at 0x05785AD0, 152 bytes long.</span><br><span class="line">Data: &lt;&lt; N       N x 7 &gt; 3C AC 4E 10 00 00 00 00 BC A4 4E 10 78 B6 37 00</span><br><span class="line">Object dump complete.</span><br></pre></td></tr></table></figure>

<p>在程序开始启动的地方(足够前的地方,只要在泄漏的内存分配的前面)使用代码:</p>
<p>_CrtSetBreakAlloc(1953); //98500为上面内存泄漏的块号,然后在stack窗口从上到下可定位内存泄漏代码</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/10/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/process_thread/multi-thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/10/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/process_thread/multi-thread/" class="post-title-link" itemprop="url">multi-thread</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-10 15:59:53" itemprop="dateCreated datePublished" datetime="2019-04-10T15:59:53+08:00">2019-04-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-04-08 10:04:58" itemprop="dateModified" datetime="2020-04-08T10:04:58+08:00">2020-04-08</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/windows/" itemprop="url" rel="index"><span itemprop="name">windows</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="win32-方式"><a href="#win32-方式" class="headerlink" title="win32 方式"></a>win32 方式</h1><h1 id="c-方式"><a href="#c-方式" class="headerlink" title="c++ 方式"></a>c++ 方式</h1><p>CPP RunTime Library</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">_beginthreadex, _endthreadex</span><br><span class="line">_endthreadex need calling the Win32 CloseHandle API</span><br></pre></td></tr></table></figure>

<p>注意：在使用了MFC的程序中不能够使用该函数创建线程，而应该使用MFC提供的线程函数<br>MFC relies on some thread - local variables and state.AfxBeginThread<br>initializes those, then calls <code>_beginthreadex</code> for you.Just part of the<br>preconditions for using the library.If you don’t use <code>AfxBeginThread</code>  some<br>of your calls to MFC functions could encounter uninitialized pointers.</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/04/10/%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB/process_thread/multi-thread/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/05/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/MQTT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/05/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/MQTT/" class="post-title-link" itemprop="url">MQTT</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-05 22:05:24" itemprop="dateCreated datePublished" datetime="2019-04-05T22:05:24+08:00">2019-04-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-06-02 20:44:44" itemprop="dateModified" datetime="2019-06-02T20:44:44+08:00">2019-06-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>It is a very light weight and binary protocol<br><em>MQTT excels when transferring data over the wire in comparison to protocols like HTTP</em></p>
<p>“MQTT is a Client Server publish/subscribe messaging transport protocol. It is light weight, open, simple, and designed so as to be easy to implement. These characteristics make it ideal for use in many situations, including constrained environments such as for communication in Machine to Machine (M2M) and Internet of Things (IoT) contexts where a small code footprint is required and/or network bandwidth is at a premium.”</p>
<p>Citation from the official MQTT 3.1.1 specification</p>
<p>The MQTT protocol was invented in 1999 by Andy Stanford-Clark (IBM) and Arlen Nipper (Arcom, now Cirrus Link).<br>The two inventors specified several requirements for the future protocol:</p>
<ul>
<li>Simple implementation</li>
<li>Quality of Service data delivery</li>
<li>Lightweight and bandwidth efficient</li>
<li>Data agnostic</li>
<li>Continuous session awareness</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/04/05/%E5%BC%80%E6%BA%90%E5%BA%93/MQTT/MQTT/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/Rust/rust-ide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/Rust/rust-ide/" class="post-title-link" itemprop="url">rust-ide</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-05 09:27:50" itemprop="dateCreated datePublished" datetime="2019-04-05T09:27:50+08:00">2019-04-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-04-14 20:43:24" itemprop="dateModified" datetime="2019-04-14T20:43:24+08:00">2019-04-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>15</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>use vscode as ide.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/Rust/rust-library/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/Rust/rust-library/" class="post-title-link" itemprop="url">rust-library</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-04-05 07:28:05 / 修改时间：07:30:54" itemprop="dateCreated datePublished" datetime="2019-04-05T07:28:05+08:00">2019-04-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>475</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>create static or dynamic library for other languages or platforms.</p>
<p>add to your project’s cargo.toml<br>and then compile with cargo build –lib (if you have bin together with your lib, I had it so so I could test it right away, there may be better ways though) or just cargo build if you have only lib. Your dll will be in target/(debug or release) folder.</p>
<p>The cargo build should just build everything, including a library.<br>Try using the same compiler options that produce a .so file on Linux and see what happens.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[lib]</span><br><span class="line">name = &quot;mylib&quot;</span><br><span class="line">crate-type = [&quot;dylib&quot;]</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2019/04/03/%E5%BC%80%E6%BA%90%E5%BA%93/libcurl/libcurl%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/04/03/%E5%BC%80%E6%BA%90%E5%BA%93/libcurl/libcurl%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">libcurl使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-04-03 16:06:11 / 修改时间：17:31:20" itemprop="dateCreated datePublished" datetime="2019-04-03T16:06:11+08:00">2019-04-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/windows/" itemprop="url" rel="index"><span itemprop="name">windows</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>static build need define macro CURL_STATICLIB in use project</p>
<p>libcurl.lib ws2_32.lib winmm.lib wldap32.lib</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MemoryStruct</span> &#123;</span></span><br><span class="line">	<span class="keyword">char</span> *memory;</span><br><span class="line">	<span class="keyword">size_t</span> size;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">size_t</span> <span class="title">WriteMemoryCallback</span><span class="params">(<span class="keyword">void</span> *contents, <span class="keyword">size_t</span> size, <span class="keyword">size_t</span> nmemb, <span class="keyword">void</span> *userp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">size_t</span> realsize = size * nmemb;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">MemoryStruct</span> *<span class="title">mem</span> =</span> (struct MemoryStruct *)userp;</span><br><span class="line"></span><br><span class="line">	mem-&gt;memory = (<span class="keyword">char</span>*)<span class="built_in">realloc</span>(mem-&gt;memory, mem-&gt;size + realsize + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span>(mem-&gt;memory == <span class="literal">NULL</span>) &#123;</span><br><span class="line">		<span class="comment">/* out of memory! */</span> </span><br><span class="line">		<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:not enough memory (realloc returned NULL)\n&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memcpy</span>(&amp;(mem-&gt;memory[mem-&gt;size]), contents, realsize);</span><br><span class="line">	mem-&gt;size += realsize;</span><br><span class="line">	mem-&gt;memory[mem-&gt;size] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> realsize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment">Server: Apache-Coyote/1.1</span></span><br><span class="line"><span class="comment">Content-Type: application/json;charset=UTF-8</span></span><br><span class="line"><span class="comment">Transfer-Encoding: chunked</span></span><br><span class="line"><span class="comment">Date: Fri, 30 Sep 2016 07:34:51 GMT</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#123;&quot;head&quot;:&#123;&quot;errorCode&quot;:&quot;000000&quot;,&quot;errorMsg&quot;:&quot;success&quot;&#125;,&quot;body&quot;:&#123;&quot;commands&quot;:null&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CMainDlg::httpPost</span><span class="params">(<span class="keyword">const</span> std::string &amp; strUrl, <span class="keyword">const</span> std::string &amp; strPostField, std::string &amp; strRet)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	std::wstring str = _T(<span class="string">&quot;yGPC: CMainDlg::httpPost strUrl:&quot;</span>);</span><br><span class="line">	str += m_ut.<span class="built_in">s2w</span>(strUrl) + _T(<span class="string">&quot; postField: &quot;</span>);</span><br><span class="line">	str += m_ut.<span class="built_in">s2w</span>(strPostField);</span><br><span class="line">	m_ut.<span class="built_in">strRemoveByParam</span>(str, _T(<span class="string">&quot;\r\n&quot;</span>));</span><br><span class="line">	<span class="built_in">OutputDebugString</span>(str.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line">	CURL *curl; </span><br><span class="line">	CURLcode res; </span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">curl_slist</span> *<span class="title">http_header</span> =</span> <span class="literal">NULL</span>; </span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">MemoryStruct</span> <span class="title">chunk</span>;</span></span><br><span class="line">	chunk.memory = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">1</span>);  <span class="comment">/* will be grown as needed by realloc above */</span> </span><br><span class="line">	chunk.size = <span class="number">0</span>;    <span class="comment">/* no data at this point */</span> </span><br><span class="line"></span><br><span class="line">	<span class="built_in">curl_global_init</span>(CURL_GLOBAL_ALL);</span><br><span class="line">	curl = <span class="built_in">curl_easy_init</span>(); </span><br><span class="line">	<span class="keyword">if</span> (!curl) </span><br><span class="line">	&#123; </span><br><span class="line">		<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:curl init failed\n&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line">std::string  strUrlEncode = boost::locale::conv::to_utf&lt;<span class="keyword">char</span>&gt;(strUrl,<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_URL,strUrlEncode.<span class="built_in">c_str</span>()); <span class="comment">//url地址</span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_POSTFIELDS,strPostField.<span class="built_in">c_str</span>()); <span class="comment">//post参数</span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_WRITEFUNCTION,WriteMemoryCallback); <span class="comment">//对返回的数据进行操作的函数地址</span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_WRITEDATA,(<span class="keyword">void</span> *)&amp;chunk); <span class="comment">//这是write_data的第四个参数值</span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_POST,<span class="number">1</span>); <span class="comment">//设置问非表示本次操作为post </span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_VERBOSE,<span class="number">1</span>); <span class="comment">//打印调试信息</span></span><br><span class="line"><span class="comment">//	curl_easy_setopt(curl,CURLOPT_HEADER,1); //将响应头信息和相应体一起传给write_data </span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_FOLLOWLOCATION,<span class="number">1</span>); <span class="comment">//设置为非,响应头信息location </span></span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_COOKIEFILE,<span class="string">&quot;/curlposttest.cookie&quot;</span>); </span><br><span class="line">	<span class="built_in">curl_easy_setopt</span>(curl,CURLOPT_TIMEOUT,<span class="number">10</span>); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	res = <span class="built_in">curl_easy_perform</span>(curl); </span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (res != CURLE_OK) </span><br><span class="line">	&#123; </span><br><span class="line">		<span class="built_in"><span class="keyword">switch</span></span>(res) </span><br><span class="line">		&#123; </span><br><span class="line">		<span class="keyword">case</span> CURLE_UNSUPPORTED_PROTOCOL: </span><br><span class="line">			<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:CURLE_UNSUPPORTED_PROTOCOL\n&quot;</span>));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> CURLE_COULDNT_CONNECT: </span><br><span class="line">			<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:CURLE_COULDNT_CONNECT\n&quot;</span>));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> CURLE_HTTP_RETURNED_ERROR: </span><br><span class="line">			<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:CURLE_HTTP_RETURNED_ERROR\n&quot;</span>));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> CURLE_READ_ERROR: </span><br><span class="line">			<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:CURLE_READ_ERROR\n&quot;</span>));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>: </span><br><span class="line">			&#123;</span><br><span class="line">				std::string str = (<span class="string">&quot;yGPC:&quot;</span>);</span><br><span class="line">				str += (<span class="string">&quot;return code:&quot;</span>);</span><br><span class="line">				str += m_ut.<span class="built_in">w2s</span>(m_ut.<span class="built_in">number2str</span>(res,_T(<span class="string">&quot;%x&quot;</span>)));</span><br><span class="line">				<span class="built_in">OutputDebugString</span>(_T(<span class="string">&quot;yGPC:CURLE_READ_ERROR\n&quot;</span>));</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">	&#125; <span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		strRet = chunk.memory;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">curl_easy_cleanup</span>(curl); </span><br><span class="line">	<span class="built_in">free</span>(chunk.memory);</span><br><span class="line">	<span class="comment">/* we&#x27;re done with libcurl, so clean it up */</span> </span><br><span class="line">	<span class="built_in">curl_global_cleanup</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jo[<span class="string">&quot;signature&quot;</span>] = <span class="built_in">genSignature</span>(strTimestamp,strRandom).<span class="built_in">c_str</span>();</span><br><span class="line">		jo[<span class="string">&quot;timestamp&quot;</span>] = strTimestamp.<span class="built_in">c_str</span>();</span><br><span class="line">		jo[<span class="string">&quot;requestTime&quot;</span>] = strTimestamp.<span class="built_in">c_str</span>();</span><br><span class="line">		jo[<span class="string">&quot;nonce&quot;</span>] = strRandom.<span class="built_in">c_str</span>();</span><br><span class="line">		jsonRoot[<span class="string">&quot;head&quot;</span>] = jo;</span><br><span class="line"></span><br><span class="line">		std::string param = <span class="string">&quot;msg=&quot;</span>;</span><br><span class="line">		param += jsonRoot.<span class="built_in">toStyledString</span>();</span><br><span class="line">		std::string  strUrlEncode = boost::locale::conv::to_utf&lt;<span class="keyword">char</span>&gt;(param,<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">		std::string strRet;</span><br><span class="line">		pwnd-&gt;<span class="built_in">httpPost</span>(url,strUrlEncode,strRet);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/53/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/53/">53</a><span class="page-number current">54</span><a class="page-number" href="/page/55/">55</a><span class="space">&hellip;</span><a class="page-number" href="/page/129/">129</a><a class="extend next" rel="next" href="/page/55/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">沪ICP备18010120号-1 </a>
      <img src="/images/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" alt=""><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011202010521" rel="noopener" target="_blank">沪公安备案31011202010521号 </a>
  </div>

<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郑  君</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2.1m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">31:20</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/code-unfold.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
