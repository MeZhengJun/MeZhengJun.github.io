<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="LiWuK0jxrq55oR5-aNOK6r0wFuUC8EvSlpNYhiiBkDk">
  <meta name="baidu-site-verification" content="code-MRwc3a52M3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhengjun.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:type" content="website">
<meta property="og:title" content="郑君的学习笔记">
<meta property="og:url" content="http://zhengjun.top/page/20/index.html">
<meta property="og:site_name" content="郑君的学习笔记">
<meta property="og:description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郑  君">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://zhengjun.top/page/20/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/20/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>郑君的学习笔记</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="郑君的学习笔记" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">郑君的学习笔记</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">要比昨天进步一点点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">213</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">79</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">1251</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郑  君"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">郑  君</p>
  <div class="site-description" itemprop="description">C++，golang，Java，Python，Kotlin，区块链，全栈</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1251</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">79</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">213</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ZhengHanYunBlog" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZhengHanYunBlog" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhenghanyun2021@126.com" title="E-Mail → mailto:zhenghanyun2021@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/channel/UCmh8TlSil0IrCA-AQ9Xx9_Q" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCmh8TlSil0IrCA-AQ9Xx9_Q" rel="noopener" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/11/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/csharp/wpf/wpf-datagrid/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/11/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/csharp/wpf/wpf-datagrid/" class="post-title-link" itemprop="url">wpf-datagrid</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-11 17:15:08" itemprop="dateCreated datePublished" datetime="2020-06-11T17:15:08+08:00">2020-06-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-21 12:13:17" itemprop="dateModified" datetime="2021-08-21T12:13:17+08:00">2021-08-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>27k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>25 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>注意加载数据需要在 Loaded 事件里面。因为表格还没加载完毕时是无法显示数据的。</p>
<p>更新完 dg.ItemsSource 对应的 List 之后，表格会自动更新，增加和删除都可以</p>
<h2 id="自动生成"><a href="#自动生成" class="headerlink" title="自动生成"></a>自动生成</h2><p>根据数据源字段自动生成列</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Grid Margin=&quot;10&quot;&gt;</span><br><span class="line">    &lt;DataGrid Name=&quot;dgSimple&quot;&gt;&lt;/DataGrid&gt;</span><br><span class="line">&lt;/Grid&gt;</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = new List&lt;User&gt;();</span><br><span class="line">users.Add(new User() &#123; dbId=11, Id = 1, Name = &quot;John Doe&quot;, Birthday = new DateTime(1971, 7, 23) &#125;);</span><br><span class="line">users.Add(new User() &#123; dbId = 12, Id = 2, Name = &quot;Jane Doe&quot;, Birthday = new DateTime(1974, 1, 17) &#125;);</span><br><span class="line">users.Add(new User() &#123; dbId = 13, Id = 3, Name = &quot;Sammy Doe&quot;, Birthday = new DateTime(1991, 9, 2) &#125;);</span><br><span class="line"></span><br><span class="line">dgSimple.ItemsSource = users;</span><br><span class="line"></span><br><span class="line">public class User</span><br><span class="line">&#123;</span><br><span class="line">    public int dbId &#123; get; set; &#125;</span><br><span class="line">    public int Id &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">    public string Name &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">    public DateTime Birthday &#123; get; set; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/06/11/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/csharp/wpf/wpf-datagrid/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/10/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/10/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/" class="post-title-link" itemprop="url">python-共享内存</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2020-06-10 14:53:28 / 修改时间：14:55:18" itemprop="dateCreated datePublished" datetime="2020-06-10T14:53:28+08:00">2020-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>通过 共享内存 和其他进程通信</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    log.info(<span class="string">&#x27;fireworks_plugin start&#x27;</span>)</span><br><span class="line">    shm = shared_memory.SharedMemory(create=<span class="literal">False</span>, size=mem_share_size, name=<span class="string">&#x27;fireworksShareMemory&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> Pair0(dial=address) <span class="keyword">as</span> s1:</span><br><span class="line">        s1.send(<span class="string">b&#x27;python login&#x27;</span>)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            msg = s1.recv().decode(encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;python:&#x27;</span> + msg)</span><br><span class="line">            log.info(<span class="string">&#x27;receive: &#x27;</span> + msg)</span><br><span class="line">            <span class="keyword">if</span> msg == <span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line">                s1.send(<span class="string">b&#x27;python bye&#x27;</span>)</span><br><span class="line">                time.sleep(<span class="number">0.5</span>)</span><br><span class="line">                log.info(<span class="string">&#x27;exit nng loop&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span> msg.startswith(<span class="string">&#x27;datas&#x27;</span>) <span class="keyword">or</span> msg.startswith(<span class="string">&#x27;ready&#x27;</span>):</span><br><span class="line">                log.info(<span class="string">&#x27;receive &#x27;</span> + msg)</span><br><span class="line">                <span class="comment"># datas,12332 后面是共享内存数据大小</span></span><br><span class="line">                <span class="comment"># load data process by memory mapping  mmap file</span></span><br><span class="line">                <span class="comment"># 收到的数据格式：&quot;datas,size,cur index, all count&quot;</span></span><br><span class="line">                param_list = msg.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(param_list) &gt;= <span class="number">4</span>:</span><br><span class="line">                    <span class="comment"># 获取数据大小</span></span><br><span class="line">                    data_size = <span class="built_in">int</span>(param_list[<span class="number">1</span>])</span><br><span class="line">                    <span class="comment"># 读取共享内存数据放到 share_df_list 里面</span></span><br><span class="line">                    load_share_data(shm, data_size)</span><br><span class="line">                    <span class="comment"># 最后一组数据，接收完毕后可以处理</span></span><br><span class="line">                    <span class="keyword">if</span> param_list[<span class="number">2</span>] == param_list[<span class="number">3</span>]:</span><br><span class="line">                        log.info(<span class="string">&#x27;get last group data&#x27;</span>)</span><br><span class="line">                        ret = proc_raw_data(share_df_list)</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">&#x27;Python datas_RESULT,&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(ret))</span><br><span class="line">                        log.info(<span class="string">&#x27;datas_RESULT,&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(ret))</span><br><span class="line">                        s1.send(<span class="built_in">bytes</span>(<span class="string">&#x27;datas_RESULT,&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(ret), encoding=<span class="string">&#x27;gbk&#x27;</span>))</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        s1.send(<span class="string">b&#x27;datas_OK&#x27;</span>)</span><br><span class="line">                        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># proc_raw_data()</span></span><br><span class="line">    shm.close()</span><br><span class="line">    shm.unlink()  <span class="comment"># Free and release the shared memory block at the very end</span></span><br><span class="line">    log.info(<span class="string">&#x27;exit plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">import</span> traceback</span><br><span class="line">    traceback.print_exc()</span><br><span class="line">    errMsg = traceback.format_exc()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: &quot;</span> + errMsg)</span><br><span class="line">    log.error(<span class="string">&quot;call plugin exception.&quot;</span> + errMsg)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">import</span> traceback</span><br><span class="line"></span><br><span class="line">    traceback.print_exc()</span><br><span class="line">    errMsg = traceback.format_exc()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: &quot;</span> + errMsg)</span><br><span class="line">    log.error(<span class="string">&quot;call plugin exception.&quot;</span> + errMsg)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/10/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/pynng/python-pynng/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/10/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/pynng/python-pynng/" class="post-title-link" itemprop="url">python-pynng</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-10 14:51:32" itemprop="dateCreated datePublished" datetime="2020-06-10T14:51:32+08:00">2020-06-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-21 14:23:20" itemprop="dateModified" datetime="2020-10-21T14:23:20+08:00">2020-10-21</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip3 install pynng</span><br></pre></td></tr></table></figure>

<p>使用样例</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pynng <span class="keyword">import</span> Pair0</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Pair0(dial=address) <span class="keyword">as</span> s1:</span><br><span class="line">    s1.send(<span class="string">b&#x27;python login&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        msg = s1.recv().decode(encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;python:&#x27;</span> + msg)</span><br><span class="line">        log.info(<span class="string">&#x27;receive: &#x27;</span> + msg)</span><br><span class="line">        <span class="keyword">if</span> msg == <span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line">            s1.send(<span class="string">b&#x27;python bye&#x27;</span>)</span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line">            log.info(<span class="string">&#x27;exit nng loop&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">elif</span> msg.startswith(<span class="string">&#x27;datas&#x27;</span>) <span class="keyword">or</span> msg.startswith(<span class="string">&#x27;ready&#x27;</span>):</span><br><span class="line">            log.info(<span class="string">&#x27;receive &#x27;</span> + msg)</span><br><span class="line">            <span class="comment"># datas,12332 后面是共享内存数据大小</span></span><br><span class="line">            <span class="comment"># load data process by memory mapping  mmap file</span></span><br><span class="line">            <span class="comment"># 收到的数据格式：&quot;datas,size,cur index, all count&quot;</span></span><br><span class="line">            param_list = msg.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(param_list) &gt;= <span class="number">4</span>:</span><br><span class="line">                <span class="comment"># 获取数据大小</span></span><br><span class="line">                data_size = <span class="built_in">int</span>(param_list[<span class="number">1</span>])</span><br><span class="line">                <span class="comment"># 读取共享内存数据放到 share_df_list 里面</span></span><br><span class="line">                load_share_data(shm, data_size)</span><br><span class="line">                <span class="comment"># 最后一组数据，接收完毕后可以处理</span></span><br><span class="line">                <span class="keyword">if</span> param_list[<span class="number">2</span>] == param_list[<span class="number">3</span>]:</span><br><span class="line">                    log.info(<span class="string">&#x27;get last group data&#x27;</span>)</span><br><span class="line">                    ret = proc_raw_data(share_df_list)</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;Python datas_RESULT,&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(ret))</span><br><span class="line">                    log.info(<span class="string">&#x27;datas_RESULT,&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(ret))</span><br><span class="line">                    s1.send(<span class="built_in">bytes</span>(<span class="string">&#x27;datas_RESULT,&#x27;</span> + <span class="string">&#x27;&#x27;</span>.join(ret), encoding=<span class="string">&#x27;gbk&#x27;</span>))</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    s1.send(<span class="string">b&#x27;datas_OK&#x27;</span>)</span><br><span class="line">                    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h2 id="接收数据不全"><a href="#接收数据不全" class="headerlink" title="接收数据不全"></a>接收数据不全</h2><p>发送的数据中有中文</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/10/%E5%BC%80%E6%BA%90%E5%BA%93/Qt/qt-QMainWindows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/10/%E5%BC%80%E6%BA%90%E5%BA%93/Qt/qt-QMainWindows/" class="post-title-link" itemprop="url">qt-QMainWindows</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2020-06-10 11:01:20 / 修改时间：11:27:36" itemprop="dateCreated datePublished" datetime="2020-06-10T11:01:20+08:00">2020-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">开源库</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E6%BA%90%E5%BA%93/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>232</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="设置标题文字"><a href="#设置标题文字" class="headerlink" title="设置标题文字"></a>设置标题文字</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">w.<span class="built_in">setWindowTitle</span>(QObject::<span class="built_in">tr</span>(<span class="string">&quot;remoteCom ver: 2020.06.10&quot;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="设置中心组件"><a href="#设置中心组件" class="headerlink" title="设置中心组件"></a>设置中心组件</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">remoteCom::<span class="built_in">remoteCom</span>(QWidget *parent, Qt::WFlags flags)</span><br><span class="line">	: <span class="built_in">QMainWindow</span>(parent, flags)</span><br><span class="line">&#123;</span><br><span class="line">	ui.<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">	<span class="keyword">this</span>-&gt;<span class="built_in">setCentralWidget</span>(<span class="keyword">new</span> <span class="built_in">QTextEdit</span>(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/09/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-compile-to-pyd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/09/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-compile-to-pyd/" class="post-title-link" itemprop="url">python-compile to pyd</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-09 16:13:50" itemprop="dateCreated datePublished" datetime="2020-06-09T16:13:50+08:00">2020-06-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-12 10:05:11" itemprop="dateModified" datetime="2020-10-12T10:05:11+08:00">2020-10-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>523</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>pyd 相当于 dll。好处多多</p>
<h2 id="编译-pyd"><a href="#编译-pyd" class="headerlink" title="编译 pyd"></a>编译 pyd</h2><p>装了 nuitka 之后，这个简单，这个在使用 winpython 的时候，调用失败了。使用下面的 cython 就可以。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nuitka --mingw64 --module --show-progress --output-dir=o 你的.py</span><br></pre></td></tr></table></figure>

<ol>
<li>安装 cython</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install Cython</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>新建 setup.py</li>
</ol>
<p>根据实际情况修改内容，下面的 language 是支持 python3 </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</span><br><span class="line"><span class="keyword">from</span> Cython.Build <span class="keyword">import</span> cythonize</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">  name = <span class="string">&#x27;arc app&#x27;</span>,</span><br><span class="line">  ext_modules = cythonize([<span class="string">&quot;proc_ui.py&quot;</span>,<span class="string">&quot;proc_data.py&quot;</span>],compiler_directives=&#123;<span class="string">&#x27;language_level&#x27;</span>: <span class="number">3</span>&#125;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>生成 pyd</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python setup.py build_ext --inplace</span><br></pre></td></tr></table></figure>

<p>我这边这样就出结果了。 没遇到任何问题，改名为 main.pyd<br>生成了 main.cp38-win_amd64.pyd 文件</p>
<ol start="4">
<li>写个入口脚本</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/09/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-%E5%85%8D%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/09/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-%E5%85%8D%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">python-免安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-09 10:03:06" itemprop="dateCreated datePublished" datetime="2020-06-09T10:03:06+08:00">2020-06-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-10-12 10:49:07" itemprop="dateModified" datetime="2020-10-12T10:49:07+08:00">2020-10-12</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>注意 win7 需要 Windows6.1-KB2533623-x64.msu 补丁</p>
<p>查看当前路径</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># python 环境下</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path</span><br></pre></td></tr></table></figure>

<h2 id="WinPython"><a href="#WinPython" class="headerlink" title="WinPython"></a>WinPython</h2><p><a target="_blank" rel="noopener" href="https://github.com/winpython/winpython">github</a></p>
<p>pyd 文件搜索路径<br>set PYTHONPATH = 路径</p>
<p>path 里面添加 dll 路径<br>tkArcTool\Library\bin</p>
<h2 id="官网下载-python-3-8-3-embed-amd64-版本"><a href="#官网下载-python-3-8-3-embed-amd64-版本" class="headerlink" title="官网下载 python-3.8.3-embed-amd64 版本"></a>官网下载 python-3.8.3-embed-amd64 版本</h2><p>注意系统需要先确认一下 3.8.3 安装版能否正常安装，我虚拟机的win7版本过于老旧，缺少补丁包，导致socket dll 加载总是失败。问题找了好久。<br>我装的 windows 版本 提示缺少 KB2533623 补丁包</p>
<h2 id="修改-python38-pth-内容"><a href="#修改-python38-pth-内容" class="headerlink" title="修改 python38.pth 内容"></a>修改 python38.pth 内容</h2><p>添加搜索路径，去掉 import site 前面的注释</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python38.<span class="built_in">zip</span></span><br><span class="line">.</span><br><span class="line">.\Lib</span><br><span class="line">.\Lib\site-packages</span><br><span class="line">.\DLLs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment to run site.main() automatically</span></span><br><span class="line"><span class="keyword">import</span> site</span><br></pre></td></tr></table></figure>

<p>进入目录里面，执行 python，进入终端，以下操作都在该终端内执行</p>
<h2 id="安装-pip"><a href="#安装-pip" class="headerlink" title="安装 pip"></a>安装 pip</h2><p><a target="_blank" rel="noopener" href="https://pip.pypa.io/en/stable/installing/">pip site</a><br>下载 get-pip.py 网页另存为比较快</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python get-pip.py --no-setuptools --no-wheel</span><br><span class="line"></span><br><span class="line">get-pip.py options</span><br><span class="line">--no-setuptools</span><br><span class="line">If <span class="built_in">set</span>, do <span class="keyword">not</span> attempt to install setuptools</span><br><span class="line"></span><br><span class="line">--no-wheel</span><br><span class="line">If <span class="built_in">set</span>, do <span class="keyword">not</span> attempt to install wheel</span><br></pre></td></tr></table></figure>

<h2 id="安装其他需要的包"><a href="#安装其他需要的包" class="headerlink" title="安装其他需要的包"></a>安装其他需要的包</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Scripts\pip install pandas  -i https://pypi.tuna.tsinghua.edu.cn/simple </span><br><span class="line">Scripts\pip install pandas  -i https://pypi.tuna.tsinghua.edu.cn/simple </span><br></pre></td></tr></table></figure>

<p>然后拷贝到目标机就可以使用了。</p>
<h2 id="移除-pip"><a href="#移除-pip" class="headerlink" title="移除 pip"></a>移除 pip</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python -m pip uninstall pip setuptools wheel</span><br></pre></td></tr></table></figure>

<h2 id="添加-tkinter"><a href="#添加-tkinter" class="headerlink" title="添加 tkinter"></a>添加 tkinter</h2><p>从虚拟环境中复制下面文件夹和文件</p>
<p>tcl<br>Lib/tkinter<br>DLLs/_tkinter.pyd, tcl86t.dll, tk86t.dll</p>
<p>主要问题就是设置搜索路径，让 python 找到库和 dll </p>
<p>set PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0;./Library/bin;./Dlls;./tcl;./Scripts;./libs;./Lib;</p>
<h3 id="ModuleNotFoundError-No-module-named-‘Tkinter’"><a href="#ModuleNotFoundError-No-module-named-‘Tkinter’" class="headerlink" title="ModuleNotFoundError: No module named ‘Tkinter’"></a>ModuleNotFoundError: No module named ‘Tkinter’</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tcl folder to embedded_distribution_folder\ (root folder of the embedded distribution)</span><br><span class="line">tkinter folder (which <span class="keyword">is</span> under Lib) either to embedded_distribution_folder\Lib <span class="keyword">or</span> to embedded_distribution_folder\</span><br><span class="line">files _tkinter.pyd tcl86t.dll tk86t.dll (which are under DLLs) either to embedded_distribution_folder\DLLs <span class="keyword">or</span> to embedded_distribution_folder\</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/08/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-%E6%A8%A1%E5%9D%97%E6%90%9C%E7%B4%A2%E8%B7%AF%E5%BE%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/08/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-%E6%A8%A1%E5%9D%97%E6%90%9C%E7%B4%A2%E8%B7%AF%E5%BE%84/" class="post-title-link" itemprop="url">python-模块搜索路径</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-08 10:19:20" itemprop="dateCreated datePublished" datetime="2020-06-08T10:19:20+08:00">2020-06-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-09-28 15:09:33" itemprop="dateModified" datetime="2020-09-28T15:09:33+08:00">2020-09-28</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>289</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Python looks for modules in “sys.path”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">type</span>(sys.path)</span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> sys.path:</span><br><span class="line">    <span class="built_in">print</span>(path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以手动加入搜索路径，这个是相对于 Python 的路径，</span></span><br><span class="line">sys.path.append(<span class="string">&#x27;code&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="zip-文件"><a href="#zip-文件" class="headerlink" title="zip 文件"></a>zip 文件</h2><p>任何文件都可以存在于 ZIP档案之中，但是只有 .py 和 .pyc 文件是能够导入的。不允许导入 ZIP 中的动态模组（ .pyd ， .so ）。请注意，如果档案中只包含 .py 文件， Python不会尝试通过添加对应的 .pyc 文件修改档案，意思是如果 ZIP 档案不包含 .pyc 文件，导入或许会变慢。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/06/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-pyc-pyd-pyo%E8%AF%B4%E6%98%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/06/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-pyc-pyd-pyo%E8%AF%B4%E6%98%8E/" class="post-title-link" itemprop="url">python-pyc-pyd-pyo说明</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2020-06-06 15:51:16 / 修改时间：16:00:22" itemprop="dateCreated datePublished" datetime="2020-06-06T15:51:16+08:00">2020-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>544</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://stackabuse.com/differences-between-pyc-pyd-and-pyo-python-files/">ref.</a></p>
<h2 id="pyc-File-Type"><a href="#pyc-File-Type" class="headerlink" title=".pyc File Type"></a>.pyc File Type</h2><p>被引用时自动生成，加快启动速度。<br>源文件改动时会自动更新</p>
<h2 id="pyo"><a href="#pyo" class="headerlink" title=".pyo"></a>.pyo</h2><p>the .pyo file results from running the interpreter when optimization settings are enabled.</p>
<p>The optimizer is enabled by adding the “-O” flag when we invoke the Python interpreter.</p>
<p><code>python -O using_lambdas.py</code></p>
<p>源文件改动时会自动更新</p>
<h2 id="pyd"><a href="#pyd" class="headerlink" title=".pyd"></a>.pyd</h2><p>In the Windows ecosystem, a .pyd file is a library file containing Python code which can be called out to and used by other Python applications. In order to make this library available to other Python programs, it is packaged as a dynamic link library.</p>
<p>A .pyd file is a dynamic link library that contains a Python module, or set of modules, to be called by other Python code. </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/CPP/cpp-%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/CPP/cpp-%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/" class="post-title-link" itemprop="url">cpp-共享内存</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2020-06-05 10:58:39 / 修改时间：11:28:38" itemprop="dateCreated datePublished" datetime="2020-06-05T10:58:39+08:00">2020-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">LPVOID lpBase;</span><br><span class="line">HANDLE hMapFile;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">load_mmp_file</span><span class="params">(<span class="keyword">const</span> wstring&amp; filePath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">scope_filePtr <span class="title">file</span><span class="params">(filePath, <span class="string">L&quot;rb&quot;</span>)</span></span>;</span><br><span class="line">	<span class="keyword">uint32_t</span> size = file.<span class="built_in">fileSize</span>();</span><br><span class="line">	unique_ptr&lt;<span class="keyword">char</span>[]&gt; spBuf = make_unique&lt;<span class="keyword">char</span>[]&gt;(size + <span class="number">1</span>);</span><br><span class="line">	file.<span class="built_in">read</span>(spBuf.<span class="built_in">get</span>(), size, <span class="number">1</span>, size);</span><br><span class="line">	file.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Create a memory-mapped file (MMF)</span></span><br><span class="line">	<span class="comment">// 创建共享文件句柄 </span></span><br><span class="line">	hMapFile = <span class="built_in">CreateFileMapping</span>(</span><br><span class="line">		INVALID_HANDLE_VALUE,   <span class="comment">// 物理文件句柄</span></span><br><span class="line">		<span class="literal">NULL</span>,   <span class="comment">// 默认安全级别</span></span><br><span class="line">		PAGE_READWRITE,   <span class="comment">// 可读可写</span></span><br><span class="line">		<span class="number">0</span>,   <span class="comment">// 高位文件大小</span></span><br><span class="line">		size,   <span class="comment">// 地位文件大小</span></span><br><span class="line">		<span class="string">L&quot;ShareMemory&quot;</span>   <span class="comment">// 共享内存名称</span></span><br><span class="line">		);</span><br><span class="line">	<span class="comment">// 映射缓存区视图 , 得到指向共享内存的指针</span></span><br><span class="line">	lpBase = <span class="built_in">MapViewOfFile</span>(</span><br><span class="line">		hMapFile,            <span class="comment">// 共享内存的句柄</span></span><br><span class="line">		FILE_MAP_ALL_ACCESS, <span class="comment">// 可读写许可</span></span><br><span class="line">		<span class="number">0</span>,</span><br><span class="line">		<span class="number">0</span>,</span><br><span class="line">		size</span><br><span class="line">		);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 将数据拷贝到共享内存</span></span><br><span class="line">	<span class="built_in">memcpy</span>((<span class="keyword">char</span>*)lpBase, spBuf.<span class="built_in">get</span>(), size);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解除文件映射</span></span><br><span class="line"><span class="built_in">UnmapViewOfFile</span>(lpBase);</span><br><span class="line"><span class="comment">// 关闭内存映射文件对象句柄</span></span><br><span class="line"><span class="built_in">CloseHandle</span>(hMapFile);</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 打开共享的文件对象</span></span><br><span class="line">HANDLE hMapFile = <span class="built_in">OpenFileMapping</span>(FILE_MAP_ALL_ACCESS,<span class="literal">NULL</span>,<span class="string">L&quot;ShareMemory&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (hMapFile)</span><br><span class="line">&#123;</span><br><span class="line">	LPVOID lpBase = <span class="built_in">MapViewOfFile</span>(hMapFile,FILE_MAP_ALL_ACCESS,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">// 将共享内存数据拷贝出来</span></span><br><span class="line">	<span class="keyword">char</span> szBuffer[BUF_SIZE] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="built_in">strcpy</span>(szBuffer,(<span class="keyword">char</span>*)lpBase);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,szBuffer);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 解除文件映射</span></span><br><span class="line">	<span class="built_in">UnmapViewOfFile</span>(lpBase);</span><br><span class="line">	<span class="comment">// 关闭内存映射文件对象句柄</span></span><br><span class="line">	<span class="built_in">CloseHandle</span>(hMapFile);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// 打开共享内存句柄失败</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;OpenMapping Error&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zhengjun.top/2020/06/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-System-V-style-shared-memory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郑  君">
      <meta itemprop="description" content="C++，golang，Java，Python，Kotlin，区块链，全栈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="郑君的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/05/%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3/python/python-System-V-style-shared-memory/" class="post-title-link" itemprop="url">python-System V style shared memory</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2020-06-05 08:43:27 / 修改时间：11:02:10" itemprop="dateCreated datePublished" datetime="2020-06-05T08:43:27+08:00">2020-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>760</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/multiprocessing.shared_memory.html">doc</a></p>
<p>This support allows creation of memory segments that can be shared between Python processes and, consequently, help avoid (de)serialization costs when sharing data between processes.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">shm = shared_memory.SharedMemory(create=<span class="literal">False</span>, size=a.nbytes,name=<span class="string">&#x27;ShareMemory&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(shm.buf))</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">memoryview</span>&#x27;&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">datas</span> =<span class="title">shm</span>.<span class="title">buf</span>.<span class="title">tobytes</span>()</span></span><br><span class="line"><span class="class"><span class="title">print</span>(<span class="params"><span class="built_in">type</span>(<span class="params">datas</span>)</span>)</span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> &#x27;<span class="title">bytes</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p>Things to Remember</p>
<ul>
<li>The memoryview built-in type provides a zero-copy interface for reading and writing slices of objects that support Python’s high performance buffer protocol.</li>
<li>The bytearray built-in type provides a mutable bytes-like type that can be used for zero-copy data reads with functions like socket.recv_from.</li>
<li>A memoryview can wrap a bytearray, allowing for received data to be spliced into an arbitrary buffer location without copying costs.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/126/">126</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郑  君</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">2m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">30:32</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/code-unfold.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





  <script type="text/javascript" src="/js/fold_action.js"></script>

</body>
</html>
